openapi: 3.1.0
info:
  title: Optum Perks Online Care API Spec
  description: |
    ## Security

    In the near term we are using Fabric for our Identity server. Therefore the registration, forgotten password,
    and login are done as oauth redirects to their system.  So for the RVOH backend we only needs to deal with three cases
    - No token needed (create guest visit)
    - Cookie GVID/Token (for guest visit until account creation)
    - Fabric generated JWT
    We will need to refresh the token, so an endpoint is included for that purpose.

    ## Property Considerations

    - Properties are assumed to be non-nullable unless otherwise stated
    - `additionalProperties` are allowed (`true`) unless otherwise stated
  version: 0.1.2
  license:
    name: private
    url: https://www.rvohealth.com/legal/terms
servers:
  - url: https://online-care-develop-lwa.azurewebsites.net/api/v1
    description: Dev deployment
  - url: https://online-care-stage-lwa.azurewebsites.net/api/v1
    description: Stage deployment
security:
  - bearerAuth: []
tags:
  - name: Accounts
    description: Patient Account Information.
  - name: Admin
    description: Administrative operations on the server
  - name: Conditions
    description: Health Conditions perks can offer consultation.
  - name: Drugs
    description: HealthDyne drug list currently updated via csv upload.
  - name: Guest visits
    description: Operations related to guest visits.
  - name: Patients
    description: Operations related to patient information.
  - name: Payments
    description: Initialize payments via Stripe.
  - name: Pharmacy
    description: Operations related to pharmacies.
  - name: Search
    description: Operations related to search.
  - name: Session Data
    description: |
      ### parameters

      Session data for token and user info management stored in redis.
      ```
      {
        sessionId: 987,
        cosmosId: 876,
        fabricId: 765,
        clinicSerial: "",
        userId: 123,
        roles: [""],
        token: "",
        fabricExpires: ""
        tokenExpires: "",
      }
      ```

      ### workflow

      - handle store on user login.
      - on Fabric token â†’ store expiry time at fabricExpires.
      - check fabric/tokenExpires for refresh handle.
  - name: Token management
    description: Operations related to token management.
  - name: Treatment plan
    description: Operations related to fetching treatment plans.
  - name: Visits
    description: Operations related to visits.
  - name: Webhooks
    description: Operations related to webhooks.
paths:
  /accounts/confirm:
    post:
      summary: |
        Confirm a new account
      description: |
        Confirm the new account of a user through a confirmation token sent to their email
      operationId: postConfirmAccount
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenVerify'
      responses:
        '201':
          description: Created
        '401':
          $ref: '#/components/responses/Error401Response'
        '403':
          $ref: '#/components/responses/Error403Response'
      tags:
        - Accounts
  /accounts/{account-id}:
    get:
      operationId: getAccountById
      summary: Get the details of a account
      description: |
        Returns the selected account at a detailed level
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/account-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Accounts
    put:
      operationId: putAccountById
      summary: Update the details of a account
      description: |
        Updates the selected account and returns the updated fields
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/account-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Accounts
  /conditions:
    get:
      operationId: getConditionsByCategory
      summary: Get a list of conditions organized by category
      description: |
        Returns a list of conditions, by category, at a summary level.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/category'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConditionListByCategory'
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Conditions
  /conditions/{condition-legacy}:
    get:
      operationId: getConditionLegacy
      summary: |
        Legacy endpoint to Get the details of a condition using either Fabric Label or a Url Slug.
      description: |
        Returns the selected health condition at a detailed level,
        including approved treatments and prices if available.

        This Legacy endpoint for fetching condition details was added to 
        allow existing tests to continue working.  In the future please 
        use 

        ```/conditions/labels/:label``` 

        OR 

        ```/conditions/url-slugs/:slug```

        Attempts to load the conditions map in the DB.  If it exists 
        it matches the id with either the fabricLabel or the urlSlug and proceeds. 
        If it does not exist, it assumes it is the label and proceeds.*
      security:
        - {}
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/condition-legacy'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: |
            OK 
            ## All Data
            If all data sources are available, 
            returns a detailed listing of the health condition, include 
            - descriptions
            - icons
            - treatment options 
            - lowest prices on treatments
            ## Fabric Only
            returns a detailing listing of the health condition, however if it 
            option have Fabric's treatment options and no pricing information.
          headers:
            session-token:
              $ref: '#/components/headers/session-token'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Condition'
              examples:
                all-data:
                  $ref: '#/components/examples/all-data'
                fabric-only:
                  $ref: '#/components/examples/fabric-only'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Conditions
  /conditions/labels/{condition-label}:
    get:
      operationId: getConditionByLabel
      summary: |
        Get the details of a condition using the Fabric Label.
      description: |
        Fetches a health condition using the Fabric Label.  Returns a detailed view health condition,
        including approved treatments and prices if the condition is mapped to a Perks XAPI health condition and the data 
        is available.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/condition-label'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: |
            OK 
            ## All Data
            If all data sources are available, 
            returns a detailed listing of the health condition, include 
            - descriptions
            - icons
            - treatment options 
            - lowest prices on treatments
            ## Fabric Only
            returns a detailing listing of the health condition, however if it 
            option have Fabric's treatment options and no pricing information.
          headers:
            session-token:
              $ref: '#/components/headers/session-token'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Condition'
              examples:
                all-data:
                  $ref: '#/components/examples/all-data'
                fabric-only:
                  $ref: '#/components/examples/fabric-only'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Conditions
  /conditions/url-slugs/{url-slug}:
    get:
      operationId: getConditionByUrlSlug
      summary: |
        Get the details of a health condition using url-slug.
      description: |
        Fetches a health condition using a url-slug. If the slug is in the conditions mapping DB, then it fetches the 
        Fabric clinical condition by the corresponding label.  If not, it returns a 404.  
        Once the Fabric condition is found, it queries for the Perks X-API condition by url-slug.  If that is found, It 
        returns a detailed view health condition, including approved treatments and prices. 
        If it is not available on Perks X-API, it returns the Fabric condition information.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/url-slug'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: |
            OK 
            ## All Data
            If all data sources are available, 
            returns a detailed listing of the health condition, include 
            - descriptions
            - icons
            - treatment options 
            - lowest prices on treatments
            ## Fabric Only
            returns a detailing listing of the health condition, however it 
            option have Fabric's treatment options and no pricing information.
          headers:
            session-token:
              $ref: '#/components/headers/session-token'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Condition'
              examples:
                all-data:
                  $ref: '#/components/examples/all-data'
                fabric-only:
                  $ref: '#/components/examples/fabric-only'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Conditions
  /conditions/upload:
    post:
      operationId: postConditions
      summary: Update condition mapping record(s) by CSV file upload
      description: |
        Updates condition mapping record(s) by CSV file upload,
        clears any records not included in the CSV.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ConditionMappingCsv'
            encoding:
              file:
                contentType: text/csv
      responses:
        '201':
          description: OK
        '400':
          description: Bad Request - no file provided || invalid file type. only csv files are allowed
      tags:
        - Conditions
  /drugs:
    get:
      operationId: getDrugs
      summary: Find items by NDC or name
      description: Returns array of object(s) depending on query parameter.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ndc'
        - $ref: '#/components/parameters/name'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: Result(s) found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Drug'
        '401':
          description: Unauthorized.
      tags:
        - Drugs
  /drugs/upload:
    post:
      operationId: postDrugs
      summary: Update drug list record(s) by CSV file upload
      description: |
        Updates drug list record(s) by CSV file upload,
        clears any records not included in the CSV.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DrugListCsv'
            encoding:
              file:
                contentType: text/csv
      responses:
        '201':
          description: OK
        '400':
          description: Bad Request - no file provided || invalid file type. only csv files are allowed
      tags:
        - Drugs
  /guest-visits:
    post:
      operationId: postGuestVisit
      summary: Create Guest Visit
      description: |
        Creates a guest visit.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      security:
        - bearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GuestVisitInput'
      responses:
        '201':
          description: Created
          headers:
            Set-Cookie:
              description: |
                This cookie acts as a temporary access token that must be retained and sent in subsequent guest_visits requests. The cookie expires in two hours. There is no option to refresh the token so the guest visit must be completed within the timeframe.
              schema:
                type: string
              examples:
                GVIDCookieExample:
                  summary: Example GVID cookie
                  value: GVID=9QVmrGhIP3Q2CzBJXSh7HOY8T4jOdEBiT%2B4X2w4Tizkio6csjbe3M3Cfs5ZMZ7nCXDcxzHA3wyNSO6e%2FfyfLOsvb0isFaAl53z%2Fd6bDafGlyQmimRfItZwbA6BplcKglhurCGr3tOMKgpDi7h4pGiZnK%2BJ2K--FeG4KN4JaX83oV%2B4--s7UxQO4w%2BDjray3ieUTKuw%3D%3D;
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Visit'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error422UnprocessableEntity'
              examples:
                unprocessable_entity:
                  value:
                    status: 422
                    errors:
                      - message: Address state can't be blank
                        reason: address_state
                      - message: Patient gender can't be blank
                        reason: patient_gender
                      - message: Patient age can't be blank
                        reason: patient_age
                    message: Unprocessable Entity
      tags:
        - Guest visits
  /guest-visits/eligibility:
    get:
      operationId: getGuestVisitEligibility
      summary: Get Guest Visit Eligibility Content
      description: |
        Get eligibility content for guest visit
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuestVisitEligibility'
        '400':
          $ref: '#/components/responses/Error400Response'
      tags:
        - Guest visits
  /guest-visits/{visit-id}/interaction:
    get:
      operationId: getGuestVisitInteraction
      summary: Current guest visit interaction
      description: |
        Retrieves a guest visit interaction.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Interaction'
              examples:
                clinical_interview:
                  $ref: '#/components/examples/clinicalInterviewInteraction'
                current_medications:
                  $ref: '#/components/examples/currentMedicationsInteraction'
                photo_upload:
                  $ref: '#/components/examples/imageUploadInteraction'
                prompt_to_register:
                  $ref: '#/components/examples/promptToRegisterInteraction'
                reason_for_visit:
                  $ref: '#/components/examples/reasonForVisitInteraction'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                description: Unprocessable Entity
                type: object
                properties:
                  status:
                    type: number
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        message:
                          type: string
                        reason:
                          type: string
                  message:
                    type: string
                examples:
                  - status: 422
                    errors:
                      - message: q884 response is required
                        reason: q884
                      - message: q885 response is required
                        reason: q885
                    message: Unprocessable Entity
      tags:
        - Guest visits
    post:
      operationId: postGuestVisitInteraction
      summary: Next guest visit interaction
      description: |
        Handles a guest visit interaction.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InteractionInput'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Interaction'
              examples:
                clinical_interview:
                  $ref: '#/components/examples/clinicalInterviewInteraction'
                current_medications:
                  $ref: '#/components/examples/currentMedicationsInteraction'
                photo_upload:
                  $ref: '#/components/examples/imageUploadInteraction'
                prompt_to_register:
                  $ref: '#/components/examples/promptToRegisterInteraction'
                reason_for_visit:
                  $ref: '#/components/examples/reasonForVisitInteraction'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                description: Unprocessable Entity
                type: object
                properties:
                  status:
                    type: number
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        message:
                          type: string
                        reason:
                          type: string
                  message:
                    type: string
                examples:
                  - status: 422
                    errors:
                      - message: q884 response is required
                        reason: q884
                      - message: q885 response is required
                        reason: q885
                    message: Unprocessable Entity
      tags:
        - Guest visits
  /guest-visits/{visit-id}/create-image:
    post:
      operationId: postGuestVisitImage
      summary: Create Image
      description: |
        Handles uploading images for guest visit interaction for a particular question.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/GVID'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImageInput'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error403Forbidden'
      tags:
        - Guest visits
  /guest-visits/{visit-id}/remove-image:
    delete:
      operationId: deleteGuestVisitImage
      summary: Delete Image
      description: |
        Handles deleting images for guest visit interaction.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GVID'
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/imageId'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '204':
          description: No Content
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error404NotFound'
      tags:
        - Guest visits
  /patients:
    get:
      operationId: getPatients
      summary: List patients
      description: |
        Returns a list of patients.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatientList'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Patients
  /healthchecks:
    get:
      operationId: getHealthCheck
      summary: Get the health of server, redis, and cosmoDB
      description: |
        Returns the connection status of the server, redis, 
        and cosmoDB.  This endpoint allows developers and clients to 
        verify the state of the backend to troubleshoot
      security:
        - {}
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: |
            OK Response represents the state of the Async Server, the Redis Cache, and the Database
          headers:
            session-token:
              $ref: '#/components/headers/session-token'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthCheck'
              examples:
                nominal:
                  $ref: '#/components/examples/nominal'
                failedDB:
                  $ref: '#/components/examples/failedDB'
                redisWait:
                  $ref: '#/components/examples/redisWait'
                redisReconnecting:
                  $ref: '#/components/examples/redisReconnecting'
                redisConnecting:
                  $ref: '#/components/examples/redisConnecting'
                redisConnect:
                  $ref: '#/components/examples/redisConnect'
                redisClose:
                  $ref: '#/components/examples/redisClose'
                redisEnd:
                  $ref: '#/components/examples/redisEnd'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Admin
  /payments:
    post:
      operationId: postCreatePaymentIntent
      summary: Create a Stripe payment intent
      description: |
        Returns a patent intent & client secret used to complete customer transaction on ui side.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentIntentInput'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentIntent'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
    get:
      operationId: getPaymentIntents
      summary: Fetch all Stripe payment intent
      description: |
        Returns a list of payments (intents) for a customer id associated with this account 
        (Redis (token) ----> DB lookup (Fabric Patient Id))
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentIntents'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
  /payments/{pi-secret}:
    get:
      operationId: getPaymentIntent
      summary: Fetch Stripe payment intent by piSecret
      description: |
        Returns a specific payments (intents) for a piSecret associated with this account
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/pi-secret'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentIntentDetail'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
  /payments/promo-codes/{promo-code}:
    get:
      operationId: getPromoCode
      summary: Verify promo code with stripe and return discount if available
      description: |
        Verifies a promo code is legitimate and returns the discount if it is.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/promo-code'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentDiscount'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
  /payment-methods:
    post:
      operationId: postCreatePaymentMethod
      summary: Create a payment method hash
      description: |
        Adds a payment method (hash) to a online care customer.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentMethod'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentMethod'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
    get:
      operationId: getPaymentMethods
      summary: Fetch all Stripe payment methods for this account
      description: |
        Returns a list of payments methods hashes associated with this account
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentMethods'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
  /payment-methods/{patient-method-name}:
    put:
      operationId: putUpdatePaymentMethod
      summary: Update a payment method hash
      description: |
        Updates a payment method (hash) to a online care customer.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/payment-method-name'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentMethod'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentMethod'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
    get:
      operationId: getPaymentMethodByName
      summary: Fetch a specific Stripe payment methods for this account
      description: |
        Returns a payments methods hash by name associated with this account
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/payment-method-name'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentMethods'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Payments
  /pharmacies/{visit-id}:
    get:
      operationId: getPharmacyListByVisitId
      summary: Get the details of the available pharmacies for a treatment plan (visit)
      description: |
        Returns a list of pharmacies that have all drugs/prices on the treatment plant available
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/zipCode'
        - $ref: '#/components/parameters/pharmacyName'
        - $ref: '#/components/parameters/ndc'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PharmacyList'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Pharmacy
  /pharmacies/{pharmacy-id}/prescriptions/{visit-id}:
    put:
      operationId: putSelectPharmacyForVisit
      summary: Select a pharmacy to send the prescription and discounts
      description: |
        Sends the prescription (Fabric OR Healthdyne) to the Pharmacy chosen by the patient.  
        Includes coupons/discounts if applicable.
        Returns the details of the pharmacy selected.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/pharmacy-id'
      requestBody:
        description: |
          Visit and pharmacy to send prescription.
          Optionally, discount coupon ids.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PharmacySelection'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pharmacy'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Pharmacy
  /search/allergy-names:
    get:
      operationId: getAllergyNames
      summary: Get Allergy Names
      description: |
        Search and get a list of allergy names
      parameters:
        - $ref: '#/components/parameters/searchQuery'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NameSearchResponse'
              examples:
                allergy-names:
                  $ref: '#/components/examples/allergyNames'
        '400':
          $ref: '#/components/responses/Error400Response'
      tags:
        - Search
  /search/drug-names:
    get:
      operationId: getDrugNames
      summary: Get Drug Names
      description: |
        Search and get a list of drug names
      parameters:
        - $ref: '#/components/parameters/searchQuery'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NameSearchResponse'
              examples:
                drug-names:
                  $ref: '#/components/examples/drugNames'
        '400':
          $ref: '#/components/responses/Error400Response'
      tags:
        - Search
  /sessions:
    get:
      operationId: getSessionData
      summary: Get Session Data
      description: |
        Returns the current session data.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
        - $ref: '#/components/parameters/X-Admin-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionData'
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Admin
  /tokens/refresh:
    get:
      operationId: getToken
      summary: Refresh token
      description: |
        Allows a current token to be exchanged for a new one.
        If the token is expired returns a 401.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Token management
  /tokens/expire:
    delete:
      operationId: deleteToken
      summary: Expire token
      description: |
        Expires the Zipnosis Token in the header.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '204':
          description: No Content
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Token management
  /tokens/verify:
    put:
      operationId: putToken
      summary: Verify token
      description: |
        Verifies a new account from email code and token. Note that the
        token is *not* in the header but in the body along with the verification code.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenVerify'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Token management
  /tokens/gvid:
    get:
      operationId: getGVIDToken
      summary: Get GVID Token
      description: |
        Allows the client to grab the raw GVID token if it needs to send this to Fabric for un/pw association. Needed while we register and auth through the Fabric whitelabel App in an iFrame.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GVID'
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Token management
  /tokens/set-fabric:
    post:
      operationId: postFabricToken
      summary: Associate Fabric Token with this user/session
      description: |
        Associates a valid fabric token with the session
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FabricToken'
      responses:
        '201':
          description: OK
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Token management
  /treatment-plans/{visit-id}:
    get:
      operationId: getTreatmentPlanById
      summary: Get treatment plan
      description: |
        Fetch a treatment plan after a completed consult.
        This uses the GET visit by Id api in Fabric for completed visits.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/User-Agent'
        - $ref: '#/components/parameters/Accept-Language'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TreatmentPlan'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Treatment plan
  /treatment-plans/{visit-id}/report:
    get:
      operationId: getTreatmentPlanReport
      summary: Get treatment plan report
      description: |
        Fetch a treatment plan report after a completed consult.
        This uses the GET visit report by id api in Fabric for completed visits.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TreatmentPlanReport'
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Treatment plan
  /treatment-plans/{visit-id}/comments:
    post:
      operationId: postTreatmentPlanComment
      summary: Post comment/question on treatment plan
      description: |
        Send comment or question to provider AFTER viewing treatment plan.
        Limited to 1 day after provider submits treatment plan back to patient.
        When posting we expect the front-end to include the patient's phone number inside the comment.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                comment:
                  type: string
                  description: |
                    The comment/question to post.
                    The patient's phone number should be included in the comment.
              examples:
                - comment: 'Should I stop taking this if my symptoms improve?<br>Patient''s phone number is: 1 (320) 310-9771'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TreatmentPlanComment'
        '401':
          $ref: '#/components/responses/Error401Response'
      tags:
        - Treatment plan
  /treatment-plans/contents/data/{patient-name}:
    get:
      operationId: getTreatmentPlanSuccessMessage
      summary: Get treatment plan success message
      description: |
        Fetch content for a treatment plan success message after a completed consult.
        This uses the GET content api in Fabric.
      parameters:
        - $ref: '#/components/parameters/patient-name'
        - $ref: '#/components/parameters/User-Agent'
        - $ref: '#/components/parameters/Accept-Language'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TreatmentPlanSuccessContent'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error401Unauthorized'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error404NotFound'
      tags:
        - Treatment plan
  /treatment-plans/{visit-id}/school-work-notes/download:
    get:
      operationId: getSchoolOrWorkNotesDownload
      summary: Download school or work notes for a treatment plan
      description: |
        Returns a pdf file of the school or work notes for a treatment plan.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/pdf:
              schema:
                type: string
                format: binary
          headers:
            Content-Disposition:
              schema:
                type: string
              examples:
                exampleValue:
                  value: attachment; filename="school_work_note_08-29-2024_190507.pdf"; filename*=UTF-8''school_work_note_08-29-2024_190507.pdf
        '401':
          $ref: '#/components/responses/Error401Response'
        '404':
          $ref: '#/components/responses/Error404Response'
      tags:
        - Treatment plan
  /visits:
    post:
      operationId: postVisit
      summary: Create Visit
      description: |
        Creates a visit.
      parameters:
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VisitInput'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Visit'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error422UnprocessableEntity'
      tags:
        - Visits
  /visits/{visit-id}/interaction:
    get:
      operationId: getVisitInteraction
      summary: Current visit interaction
      description: |
        Retrieve an authenticated user's visit interaction.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/User-Agent'
        - $ref: '#/components/parameters/Accept-Language'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Interaction'
              examples:
                clinical_interview:
                  $ref: '#/components/examples/clinicalInterviewInteraction'
                current_medications:
                  $ref: '#/components/examples/currentMedicationsInteraction'
                photo_upload:
                  $ref: '#/components/examples/imageUploadInteraction'
                prompt_to_register:
                  $ref: '#/components/examples/promptToRegisterInteraction'
                reason_for_visit:
                  $ref: '#/components/examples/reasonForVisitInteraction'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                description: Unprocessable Entity
                type: object
                properties:
                  status:
                    type: number
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        message:
                          type: string
                        reason:
                          type: string
                  message:
                    type: string
                examples:
                  - status: 422
                    errors:
                      - message: q884 response is required
                        reason: q884
                      - message: q885 response is required
                        reason: q885
                    message: Unprocessable Entity
      tags:
        - Visits
    post:
      operationId: postVisitInteraction
      summary: Next visit interaction
      description: |
        Handles an authenticated user's visit interaction.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/User-Agent'
        - $ref: '#/components/parameters/Accept-Language'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InteractionInput'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Interaction'
              examples:
                clinical_interview:
                  $ref: '#/components/examples/clinicalInterviewInteraction'
                current_medications:
                  $ref: '#/components/examples/currentMedicationsInteraction'
                photo_upload:
                  $ref: '#/components/examples/imageUploadInteraction'
                prompt_to_register:
                  $ref: '#/components/examples/promptToRegisterInteraction'
                reason_for_visit:
                  $ref: '#/components/examples/reasonForVisitInteraction'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                description: Unprocessable Entity
                type: object
                properties:
                  status:
                    type: number
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        message:
                          type: string
                        reason:
                          type: string
                  message:
                    type: string
                examples:
                  - status: 422
                    errors:
                      - message: q884 response is required
                        reason: q884
                      - message: q885 response is required
                        reason: q885
                    message: Unprocessable Entity
      tags:
        - Visits
  /visits/{visit-id}/create-image:
    post:
      operationId: postVisitImage
      summary: Create Image
      description: |
        Handles uploading images for visit interaction for a particular question.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ImageInput'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error403Forbidden'
      tags:
        - Visits
  /visits/{visit-id}/remove-image:
    delete:
      operationId: deleteVisitImage
      summary: Delete Image
      description: |
        Handles deleting images for visit interaction.
      parameters:
        - $ref: '#/components/parameters/visit-id'
        - $ref: '#/components/parameters/imageId'
        - $ref: '#/components/parameters/Ocp-Apim-Subscription-Key'
      responses:
        '204':
          description: No Content
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error404NotFound'
      tags:
        - Visits
  /webhooks/stripe:
    post:
      operationId: postStripeWebhook
      summary: Stripe Webhook
      description: This endpoint handles POST requests from Stripe's webhook events. Webhook events can be added via Stripe's Dashboard.
      requestBody:
        description: The payload sent by Stripe, containing details about the event.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: The unique identifier for the event.
                  examples:
                    - evt_1HhZsW2eZvKYlo2CVJXsLs5A
                object:
                  type: string
                  description: The type of object in the event (i.e. request.body.event [`event`]).
                  examples:
                    - event
                type:
                  type: string
                  description: The type of event from Stripe (i.e. request.body.event.type [`checkout.session.completed`]).
                  examples:
                    - charge.succeeded
                data:
                  type: object
                  properties:
                    object:
                      type: object
                      description: The main data object in the event, e.g., a session or a payment.
                      properties:
                        id:
                          type: string
                          description: The unique identifier for the object within Stripe.
                          examples:
                            - cs_test_a1ZxsX2eZ3YxUVJ1rYPmP2M5U
                        amount:
                          type: integer
                          description: The total amount for the session, in cents (or smallest currency unit).
                          examples:
                            - 5000
                        currency:
                          type: string
                          description: Currency of transaction.
                          examples:
                            - usd
                        customer:
                          type: string
                          description: The Stripe customer ID related to the event.
                          examples:
                            - cus_JGgrsxEiwxZ2Vg
                        metadata:
                          type: object
                          description: Any metadata params passed into the origin payment intent.
                          properties:
                            zipAuth:
                              type: string
                              description: Zipnosis auth required for webhook to call Fabric promo_code endpoint.
                              examples:
                                - eyJhbGciOiJIUzI1NiIsImlzcyI6InppcG5vc2lzIn0.eyJ1c2VyX2lkIjo5MDMzOSwiaWF0IjoxNzI0ODgwMzYwLCJleHAiOjE3MjQ4ODEyNjAsImlzcyI6InppcG5vc2lzIiwiandlX3Rva2VuIjpudWxsfQ.3j3KSCTSYbket8jFZQfcsDulJwWiY88bNRzJxaN6Sn4
                            visitId:
                              type: string
                              description: Visit id attached to this payment.
                              examples:
                                - 67152283-1c7c-432a-9970-8b2bb8fccc51
                        paid:
                          type: boolean
                          description: Paid success or fail.
                          examples:
                            - true
                        payment_intent:
                          type: string
                          description: Payment intent ID.
                          examples:
                            - pi_3QzjCrAGjvV1XAXX1xAa2iFS
                        payment_method:
                          type: string
                          description: Customer payment method ID used for transaction.
                          examples:
                            - pm_3QzjCrAGjvV1XAXX1xAa2iFS
              examples:
                - id: evt_1HhZsW2eZvKYlo2CVJXsLs5A
                  object: event
                  type: checkout.session.completed
                  data:
                    object:
                      id: cs_test_a1ZxsX2eZ3YxUVJ1rYPmP2M5U
                      amount: 5000
                      currency: usd
                      customer: cus_JGgrsxEiwxZ2Vg
                      metadata:
                        zipAuth: eyJhbGciOiJIUzI1NiIsImlzcyI6InppcG5vc2lzIn0.eyJ1c2VyX2lkIjo5MDMzOSwiaWF0IjoxNzI0ODgwMzYwLCJleHAiOjE3MjQ4ODEyNjAsImlzcyI6InppcG5vc2lzIiwiandlX3Rva2VuIjpudWxsfQ.3j3KSCTSYbket8jFZQfcsDulJwWiY88bNRzJxaN6Sn4
                        visitId: 67152283-1c7c-432a-9970-8b2bb8fccc51
                      paid: true
                      payment_intent: pi_3QzjCrAGjvV1XAXX1xAa2iFS
                      payment_method: pm_3QzjCrAGjvV1XAXX1xAa2iFS
      responses:
        '200':
          description: Successful receipt of the webhook event.
        '400':
          description: Bad request if the event cannot be processed.
        '500':
          description: Internal server error if there is an issue processing the event.
      tags:
        - Webhooks
components:
  schemas:
    Account:
      type: object
      properties:
        email:
          type: string
          format: email
        fullName:
          type: string
        insuranceCarrier:
          type: string
        insuranceGroup:
          type: string
        insuranceGroupId:
          type: string
        insuranceId:
          type: string
        mobilePhone:
          type: string
        phone:
          type: string
        smsNotify:
          type: boolean
        canChangePassword:
          type: boolean
        profileContent:
          description: 'Source: Fabric content.patient_profile'
          type: object
          properties:
            allergiesLink:
              type: string
            documentTitle:
              type: string
            medicationsLink:
              type: string
            patientDashboardLink:
              type: string
            patientDetailsLink:
              type: string
            visitHistoryLink:
              type: string
        accountContent:
          description: 'Source: Fabric content.client_content'
          type: object
          properties:
            profilePersonalInformation:
              type: string
            accountInsuranceInformation:
              type: string
      examples:
        - email: bob@aol.com
          fullName: Bob Frog
          insuranceCarrier: Blue Cross
          insuranceGroup: BC-Plus
          insuranceGroupId: 45-768393F
          insuranceId: 123485690F
          mobilePhone: 555.555.5555
          phone: 123.456.5555
          smsNotify: true
          canChangePassword: true
          profileContent:
            allergiesLink: Allergies
            documentTitle: Patient Profile
            medicationsLink: Medications
            patientDashboardLink: Patient Dashboard
            patientDetailsLink: Patient Details
            visitHistoryLink: Visit History
          accountContent:
            profilePersonalInformation: Personal information
            accountInsuranceInformation: Insurance information
    Address:
      type: object
      properties:
        addressLine1:
          type: string
        addressLine2:
          type: string
        city:
          type: string
        state:
          type: string
        zipCode:
          type: string
        country:
          type: string
        phoneNumber:
          type: string
      required:
        - addressLine1
        - city
        - state
        - zipCode
        - phoneNumber
      examples:
        - addressLine1: TEST MAIN
          addressLine2: Suite 102
          city: MINNEAPOLIS
          country: USA
          state: MN
          zipCode: '55401'
          phoneNumber: 256-555-5555
    BusinessHours:
      type: object
      properties:
        open:
          type: object
          properties:
            day:
              type: string
            time:
              type: string
              format: date-time
        close:
          type: object
          properties:
            day:
              type: string
            time:
              type: string
              format: date-time
      examples:
        - open:
            day: Monday
            time: '8:00'
          close:
            day: Monday
            time: '18:00'
    Condition:
      type: object
      properties:
        conditionDetails:
          $ref: '#/components/schemas/ConditionDetails'
        fulfillmentOptions:
          $ref: '#/components/schemas/FulfillmentOptions'
        treatmentOptions:
          $ref: '#/components/schemas/TreatmentOptions'
      examples:
        - conditionDetails:
            heading: Restore your hair and your confidence. Get prescribed online in minutes.
            description: |
              Fill out a questionnaire online. If youâ€™re approved by one of Optumâ€™s experienced providers, 
              youâ€™ll have your online prescription in less than 15 minutes.
            icon:
              imageUrl: https://example.com/image.png
              darkModeImageUrl: https://example.com/dark-mode-image.png
              altText: An example icon
            ctaButton: Questionnaire for hair loss
            label: cp_9q_449a_acne
            urlSlug: allergies
            name: Allergic Rhinitis
            commonName: Allergies
          fulfillmentOptions:
            homeDelivery:
              drugNames:
                - Minoxidil
                - Finasteride
              priceRange:
                label: Total cost
                minPrice:
                  amount: '10.50'
                  currency: USD
                  display: $10.50
                maxPrice:
                  amount: '20.50'
                  currency: USD
                  display: $20.50
            retail:
              drugNames:
                - Minoxidil
                - Finasteride
              priceRange:
                label: Total cost
                minPrice:
                  amount: '8.50'
                  currency: USD
                  display: $8.50
                maxPrice:
                  amount: '19.50'
                  currency: USD
                  display: $19.50
          treatmentOptions:
            - perksId: e82bfafb-eca1-4711-9156-b0f9fc8b54a7
              commonName: Minoxidil
              urlSlug: minoxidil
              formulationId: 84b18721-2493-4a31-a5ad-4d81dc1647e4
              price:
                amount: '8.50'
                currency: USD
                display: $8.50
              quantity: 30
              drugType: BRAND
              description: This medicine is an HMG-CoA reductase inhibitor (also known as a statin) used in combination with...
    ConditionDetails:
      type: object
      properties:
        heading:
          type: string
          description: |
            Source: fabricCondition.content.page_heading string
          examples:
            - Get fast, convenient care for acne. No appointment needed.
        description:
          description: |
            Source: fabricCondition.content.wysk_body & treatment_plan_expectation_text string
          type: string
          examples:
            - Acne is a common skin condition that occurs when hair follicles become clogged with oil and dead skin cells. This can result in various types of blemishes, including pimples, blackheads, whiteheads, and in some cases, deeper cysts or nodules. Acne typically affects areas with a high concentration of oil glands, such as the face, chest, and back.
        icon:
          description: |
            Source: perksCondition.heroIcon 
            OR fabricCondition.content.primary_image_path If Perks is unavalible
          $ref: '#/components/schemas/ImageUrl'
        ctaButton:
          description: |
            Source: fabricCondition.content.start_today_heading
          type: string
          examples:
            - Questionnaire for hair loss
        label:
          description: |
            Primary Key
            Source: fabricCondition.label
            This label is the primary key for Fabric's Clinical Conditions.
          type: string
          examples:
            - cp_9q_449a_acne
        urlSlug:
          type: string
          pattern: ^[a-z0-9-]+$
          description: |
            Source: perksCondition.urlSlug 
            OR convert fabricCondition.name into slug       
            A stable identifier for this health condition. 
            URL slugs must be URL-safe: 
            lower case letters (a-z), numbers (0-9), and dashes (-) only.
          examples:
            - allergies
        name:
          description: |
            Source: fabricCondition.name
            The clinical name for this condition.
          type: string
          examples:
            - Allergic Rhinitis
        alternateName:
          description: |
            Source: perksCondition.name  
            The alternate clinical name for this condition.
          type: string
          examples:
            - Allergic Rhinitis
        commonName:
          description: |
            Source: perksCondition.commonName OR fabricCondition.name
            Name the condition is commonly known as.  If Perks is not available 
            Fabric name will be used.
          type: string
          examples:
            - Allergies
      required:
        - heading
        - description
        - label
        - name
      examples:
        - heading: Restore your hair and your confidence. Get prescribed online in minutes.
          description: |
            Fill out a questionnaire online. If youâ€™re approved by one of Optumâ€™s experienced providers, 
            youâ€™ll have your online prescription in less than 15 minutes.
          icon:
            imageUrl: https://example.com/image.png
            darkModeImageUrl: https://example.com/dark-mode-image.png
            altText: An example icon
          ctaButton: Questionnaire for hair loss
          label: cp_9q_449a_acne
          urlSlug: allergies
          name: Allergic Rhinitis
          commonName: Allergies
    ConditionListByCategory:
      type: array
      items:
        type: object
        properties:
          name:
            type: string
            description: Category Name
            examples:
              - Cold, flu, COVID-19
          fabricId:
            type: number
            description: Fabric Id for category
            examples:
              - 40
          conditions:
            type: array
            items:
              $ref: '#/components/schemas/ConditionSummary'
      examples:
        - - name: Cold, flu, COVID-19
            fabricId: 40
            conditions:
              - label: cp_12q_449a_covid19coronavirus
                name: COVID-19
                primaryDescription: Evaluation of COVID-19 (coronavirus)
                primaryImagePath: /PatientInterface/Conditions/covid-a.webp
              - label: cp_12q_449a_respiratory
                name: Cold, sinus infection, or flu
                primaryDescription: Stuffy or runny nose, cough, sore throat, headache, fever, or muscle aches
                primaryImagePath: /PatientInterface/Conditions/uri-a.webp
                urlSlug: cold
              - label: cp_184q_449a_reason
                name: COVID-19 treatments
                primaryDescription: Evaluation for COVID-19 treatment for those with a confirmed diagnosis of COVID-19
                primaryImagePath: /PatientInterface/Conditions/paxlovid-a.webp
                urlSlug: covid-19
              - label: cp_41q_449a_reason
                name: Flu exposure
                primaryDescription: Medication to prevent the flu after a close contact exposure (not for active symptoms)
                primaryImagePath: /PatientInterface/Conditions/fluexposure-a.webp
                urlSlug: flu
              - label: cp_171q_449a_reason
                name: Post-COVID discharge (video required)
                primaryDescription: COVID-19 (coronavirus) follow-up after being discharged from the hospital or clinic
                primaryImagePath: /PatientInterface/Conditions/postcoviddischarge-a.webp
                urlSlug: post-covid
              - label: cp_42q_449a_reason
                name: Whooping cough exposure
                primaryDescription: Medication to prevent whooping cough after close contact with a person with the illness
                primaryImagePath: /PatientInterface/Conditions/whoopingcough-a.webp
                urlSlug: whooping-cough
    ConditionSummary:
      type: object
      properties:
        label:
          type: string
          examples:
            - cp_9q_449a_acne
        name:
          type: string
          description: The clinical name for this condition.
          examples:
            - Allergic Rhinitis
        primaryDescription:
          type: string
          examples:
            - Cold, sinus infection, or sore throat
        primaryImagePath:
          type: string
          examples:
            - /PatientInterface/Conditions/acne-a.webp
        urlSlug:
          type: string
          description: |
            A stable identifier for this health condition. URL slugs must be URL-safe: lower case letters (a-z), numbers (0-9), and dashes (-) only.
          examples:
            - allergies
      examples:
        - label: cp_12q_449a_covid19coronavirus
          name: COVID-19
          primaryDescription: Evaluation of COVID-19 (coronavirus)
          primaryImagePath: /PatientInterface/Conditions/covid-a.webp
    Drug:
      type: object
      properties:
        perksId:
          type: string
          format: uuid
          examples:
            - 84b18721-2493-4a31-a5ad-4d81dc1647e4
        name:
          type: string
          examples:
            - Minoxidil
        drugType:
          $ref: '#/components/schemas/DrugType'
        urlSlug:
          type: string
          examples:
            - atorvastatin
        variants:
          type: array
          items:
            type: object
            properties:
              perksId:
                type: string
                format: uuid
                examples:
                  - 84b18721-2493-4a31-a5ad-4d81dc1647e4
              urlSlug:
                type: string
                examples:
                  - atorvastatin
              name:
                type: string
                examples:
                  - Lipitor
              drugType:
                $ref: '#/components/schemas/DrugType'
        formulationId:
          type: string
          format: uuid
          examples:
            - 84b18721-2493-4a31-a5ad-4d81dc1647e4
        price:
          $ref: '#/components/schemas/Price'
        quantity:
          type: number
          format: double
          examples:
            - 30
          description: The quantity that was used to calculate the price for this formulation.
        protocol:
          type: string
          examples:
            - General skin conditions
        ndc:
          type: string
          examples:
            - '12345678900'
        drugDescription:
          type: string
          examples:
            - Lorem ispum dilor sit amet.
        daysSupply:
          type: integer
          examples:
            - 30
        refillCount:
          type: integer
          examples:
            - 3
        drugForm:
          type: string
          examples:
            - foam
        strength:
          type: string
          examples:
            - '15'
            - 0.3-2.5
        strengthQualifier:
          type: string
          examples:
            - '%'
        sig:
          type: string
          examples:
            - Apply to the affected skin 2 times per day
        cpid:
          type: integer
          examples:
            - 49
        unitPrice:
          type: number
          examples:
            - 27.95
      examples:
        - perksId: 84b18721-2493-4a31-a5ad-4d81dc1647e4
          name: Minoxidil
          drugType: brand
          urlSlug: atorvastatin
          variants:
            - perksId: 84b18721-2493-4a31-a5ad-4d81dc1647e4
              urlSlug: atorvastatin
              name: Lipitor
              drugType: brand
          formulationId: 84b18721-2493-4a31-a5ad-4d81dc1647e4
          price:
            amount: '10.50'
            currency: USD
            display: $10.50
          quantity: 50
          ndc: '40085031530'
          protocol: Acne and rosacea
          drugDescription: erythromycin with ethanol (Erygel) 2 % topical gel
          daysSupply: 30
          refillCount: 3
          drugForm: gel
          strength: '2'
          strengthQualifier: '%'
          sig: Apply to the affected skin 2 times per day
          cpid: 9
          unitPrice: 74.86
    DrugVariantInfo:
      type: object
      description: |
        Drub & Variants info. Source Perks XAPI drugs/{id}/prices
      properties:
        ndc:
          type: string
        formulationId:
          type: string
        name:
          type: string
        variants:
          type: array
          items:
            type: object
            properties:
              ndc:
                type: string
              formulationId:
                type: string
              name:
                type: string
      required:
        - ndc
        - formulationId
        - name
      examples:
        - ndc: '31722092601'
          formulationId: '72162199205'
          name: Methylphenidate
          variants:
            - ndc: '71376020103'
              formulationId: '72162199205'
              name: Jornay Pm
    DrugListCsv:
      type: object
      properties:
        rows:
          type: array
          items:
            type: object
            properties:
              protocol:
                type: string
                examples:
                  - '123'
              ndc:
                type: string
                examples:
                  - '12345678900'
              drug_description:
                type: string
                examples:
                  - '123'
              quantity:
                type: string
                examples:
                  - '123'
              days_supply:
                type: string
                examples:
                  - '123'
              refill_count:
                type: string
                examples:
                  - '123'
              drug_form:
                type: string
                examples:
                  - '123'
              strength:
                type: string
                examples:
                  - '123'
              strength_qualifier:
                type: string
                examples:
                  - '123'
              sig:
                type: string
                examples:
                  - '123'
              cpid:
                type: string
                examples:
                  - '123'
              unit_price:
                type: string
                examples:
                  - '123'
            required:
              - protocol
              - ndc
              - drug_description
              - quantity
              - days_supply
              - refill_count
              - drug_form
              - strength
              - strength_qualifier
              - sig
              - cpid
              - unit_price
      examples:
        - rows:
            - protocol: Acne and rosacea
              ndc: '66993095931'
              drug_description: clindamycin-tretinoin (Ziana) 1.2-0.025 % topical gel
              quantity: '1'
              days_supply: '30'
              refill_count: '3'
              drug_form: gel
              strength: 1.2-0.025
              strength_qualifier: '%'
              sig: Apply to the affected skin 1 time per day at bedtime
              cpid: '9'
              unit_price: '88.4'
    DrugPricingInfo:
      description: |
        Price info for a single drug formulation (strength, method of delivery, etc..)
        Depending on the context, Source could be Fabric treatment_plan.prescriptions, 
        Perks XAPI drugs/{id}/prices, or Internal price list for Healthdyne.
      type: object
      properties:
        ndc:
          type: string
        formulationId:
          type: string
        name:
          type: string
        couponId:
          type: string
          format: uuid
        price:
          $ref: '#/components/schemas/Price'
      required:
        - ndc
        - formulationId
        - name
        - price
      examples:
        - ndc: '31722092601'
          formulationId: '72162199205'
          name: Methylphenidate
          couponId: '005947'
          price:
            amount: '10.50'
            currency: USD
            display: $10.50
    DrugType:
      type: string
      enum:
        - brand
        - generic
      examples:
        - generic
      description: |
        Backwards Compatibility Note:** If an unrecognized `drugType` is received by the client, `brand` should be assumed.
    FabricToken:
      type: object
      properties:
        token:
          type: string
      examples:
        - token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
    FulfillmentOptions:
      type: object
      properties:
        homeDelivery:
          type: object
          properties:
            drugNames:
              description: 'Source: Mapping Fabric/Perks NDC to DB(Healthdyne)'
              type: array
              items:
                type: string
            priceRange:
              description: 'Source: Mapping Fabric/Perks NDC to DB(Healthdyne)'
              $ref: '#/components/schemas/PriceRange'
        retail:
          type: object
          properties:
            drugNames:
              description: 'Source: Perks (filtered by what is available in Fabric Treatment Options)'
              type: array
              items:
                type: string
            priceRange:
              description: 'Source: Perks: healthConditions.drugs.price'
              $ref: '#/components/schemas/PriceRange'
      examples:
        - homeDelivery:
            drugNames:
              - Minoxidil
              - Finasteride
            priceRange:
              label: Total cost
              minPrice:
                amount: '10.50'
                currency: USD
                display: $10.50
              maxPrice:
                amount: '20.50'
                currency: USD
                display: $20.50
          retail:
            drugNames:
              - Minoxidil
              - Finasteride
            priceRange:
              label: Total cost
              minPrice:
                amount: '8.50'
                currency: USD
                display: $8.50
              maxPrice:
                amount: '19.50'
                currency: USD
                display: $19.50
    GuestVisitInput:
      type: object
      required:
        - guestVisit
      properties:
        guestVisit:
          type: object
          required:
            - addressState
            - patientGender
            - patientAge
          properties:
            addressState:
              type: string
            patientBirthDate:
              type:
                - 'null'
                - string
              format: date
            patientGender:
              type: string
            preparerBirthDate:
              type:
                - 'null'
                - string
              format: date
            dependentVisit:
              type: boolean
            patientAge:
              type: number
            preparerAge:
              type: number
              description: The age of the preparer. This is required when dependentVisit is true
        conditionLabel:
          type: string
          description: |
            This allows the visit's condition, also known as reason for visit, to be preset at the start of the visit. If this parameter is omitted, the reason_for_visit will be left unset, and the guest visit will later prompt for a reason for visit.
      examples:
        - guestVisit:
            addressState: MN
            patientBirthDate: '1987-04-03'
            patientGender: male
            preparerBirthDate: 'null'
            dependentVisit: false
            patientAge: 34
          conditionLabel: cp_9q_449a_acne
    HealthCheck:
      type: object
      properties:
        server:
          type: string
          enum:
            - healthy
            - unhealthy
        redis:
          type: string
          enum:
            - wait
            - reconnecting
            - connecting
            - connect
            - ready
            - close
            - end
        db:
          type: string
          enum:
            - connected
            - error
      required:
        - server
        - redis
        - db
      examples:
        - server: healthy
          redis: ready
          db: connected
        - server: unhealthy
          redis: ready
          db: error
        - server: unhealthy
          redis: wait
          db: connected
        - server: unhealthy
          redis: reconnecting
          db: connected
        - server: unhealthy
          redis: connecting
          db: connected
        - server: unhealthy
          redis: connect
          db: connected
        - server: unhealthy
          redis: close
          db: connected
        - server: unhealthy
          redis: end
          db: connected
    Image:
      type: object
      properties:
        id:
          type: number
        fileName:
          type: string
        questionIdentifier:
          type: string
      examples:
        - id: 17180
          fileName: skin-rash-left-hand.jpg
          questionIdentifier: q779
    ImageInput:
      type: object
      properties:
        questionZid:
          type: string
        file:
          type: string
          format: binary
      examples:
        - questionZid: q779
          file: (binary)
    ImageUrl:
      type: object
      properties:
        imageUrl:
          type: string
          examples:
            - https://example.com/image.png
        darkModeImageUrl:
          type: string
          examples:
            - https://example.com/dark-mode-image.png
        altText:
          type: string
          examples:
            - An example image
      examples:
        - imageUrl: https://example.com/image.png
          darkModeImageUrl: https://example.com/dark-mode-image.png
          altText: An example icon
    Interaction:
      type: object
      properties:
        stateName:
          type: string
        title:
          type: string
        progressBar:
          $ref: '#/components/schemas/ProgressBar'
        content:
          type: array
          items:
            type: object
            properties:
              contentType:
                type: string
              contentName:
                type: string
              contentLabel:
                type: string
              lookupApiUrl:
                type: string
              maxCount:
                type: number
              maxLength:
                type: number
              minCount:
                type: number
              options:
                type: array
                items:
                  type: object
                  properties:
                    optionLabel:
                      type: string
                    optionValue:
                      type: string
                    meta:
                      type: object
                      properties:
                        restrictions:
                          type: array
                          items:
                            type: string
                        eligibilitySettings:
                          type: object
                          properties:
                            patientGender:
                              type:
                                - 'null'
                                - string
                            patientMaxAge:
                              type:
                                - 'null'
                                - number
                            patientMinAge:
                              type:
                                - 'null'
                                - number
                            establishedPatientsOnly:
                              type:
                                - 'null'
                                - boolean
              postUrl:
                type: string
              required:
                type: boolean
        errorDescriptions:
          type: object
          description: |
            #### Front end error descriptions

            - **errorCode**: Front end can use this to map to specific error.
            - **errorDescription**: Description of the error defined by CMS / Product team.
          additionalProperties:
            type: string
        progress:
          type: object
          additionalProperties:
            type: object
            properties:
              percentage:
                type: number
        actions:
          $ref: '#/components/schemas/Action'
      examples:
        - stateName: clinical_interview
          title: Interview Question
          content:
            - contentType: select_input
              contentName: q775
              contentLabel: <p>Almost done! Photos of the affected area of the skin are required to diagnose and treat you.</p><p><b>Can photos be taken and uploaded at this time?</b></p>
              options:
                - optionLabel: 'Yes'
                  optionValue: 'yes'
                - optionLabel: 'No'
                  optionValue: 'no'
              required: true
          progress:
            clinical_interview:
              percentage: 28.4
          actions:
            continue:
              actionLabel: Continue
            goBack:
              actionLabel: Back
    InteractionInput:
      type: object
      properties:
        actionName:
          type: string
        responses:
          type: object
          additionalProperties:
            type: string
      examples:
        - actionName: continue
          responses:
            q857: ihaveneverbeenprescribedtreatmentforthiscondition
            q858: 'yes'
    NameSearchResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: number
          name:
            type: string
      examples:
        - - id: 2009551
            name: Cystex (methenamine-benz acid)
          - id: 2253445
            name: Cystex Plus (methenamine-sal)
    PaymentIntent:
      description: |
        See https://docs.stripe.com/api/payment_intents/create
      type: object
      required:
        - piClientSecret
      properties:
        id:
          type: string
          description: |
            Maps to PaymentIntent.id in Stripe. 
            Optional to allow retrieving payment methods.
        customerId:
          type: string
          description: |
            Maps to PaymentIntent.customer in Stripe.  (Also Customer.id)
            Optional to allow saving and retrieving payment methods.
        piClientSecret:
          type: string
          description: |
            Maps to PaymentIntent.client_secret in Stripe.
        csClientSecret:
          type: string
          description: |
            Maps to CustomerSession.client_secret in Stripe.
      examples:
        - piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
        - piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
          csClientSecret: _POpxYpmkXdtttYtZQYhrsOJZ2RCQ9kCqqXRU6qrP5c4Jgje
        - piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
          csClientSecret: _POpxYpmkXdtttYtZQYhrsOJZ2RCQ9kCqqXRU6qrP5c4Jgje
          customerId: cus_NffrFeUfNV2Hib
        - piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
          csClientSecret: _POpxYpmkXdtttYtZQYhrsOJZ2RCQ9kCqqXRU6qrP5c4Jgje
          customerId: cus_NffrFeUfNV2Hib
          id: pi_3MtwBwLkdIwHu7ix28a3tqPa
    PaymentIntentInput:
      description: |
        See https://docs.stripe.com/api/payment_intents/create
      type: object
      properties:
        amount:
          type: number
          description: |
            Maps to PaymentIntent.amount in Stripe
        customerId:
          type: string
          description: |
            Maps to PaymentIntent.customer in Stripe.  (Also Customer.id)
            Optional to allow saving and retrieving payment methods.
        currency:
          type: string
          enum:
            - usd
          description: |
            Maps to PaymentIntent.currency in Stripe.
            Defaults to 'usd'.
      required:
        - amount
      examples:
        - amount: 1099
          customerId: cus_NffrFeUfNV2Hib
          currency: usd
    PaymentIntentDetail:
      description: |
        See https://docs.stripe.com/api/payment_intents/list
      type: object
      properties:
        paymentIntentId:
          type: string
          description: |
            Maps to PaymentIntents.data[].id in Stripe.
        amount:
          type: number
          description: |
            Maps to PaymentIntents.data[].amount in Stripe.
        amountReceived:
          type: number
          description: |
            Maps to PaymentIntents.data[].amount_received in Stripe.
        created:
          type: string
          format: date-time
          description: |
            Maps to PaymentIntents.data[].created in Stripe.
        piClientSecret:
          type: string
          description: |
            Maps to PaymentIntent.client_secret in Stripe.
        invoiceId:
          type: string
          description: |
            Maps to PaymentIntents.data[].invoice in Stripe.
      examples:
        - paymentIntentId: pi_3MtwBwLkdIwHu7ix28a3tqPa
          amount: 2000
          amountReceived: 1500
          created: '2018-11-13T20:20:39+00:00'
          piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
          invoiceId: in_1MtHbELkdIwHu7ixl4OzzPMv
    PaymentIntents:
      description: |
        See https://docs.stripe.com/api/payment_intents/list
      type: object
      properties:
        transactions:
          type: array
          items:
            $ref: '#/components/schemas/PaymentIntentDetail'
      examples:
        - transactions:
            - paymentIntentId: pi_3MtwBwLkdIwHu7ix28a3tqPa
              amount: 2000
              amountReceived: 1500
              created: '2018-11-13T20:20:39+00:00'
              piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
              invoiceId: in_1MtHbELkdIwHu7ixl4OzzPMv
            - paymentIntentId: pi_3MtwBwLkdIwHu7ix28a3tqPb
              amount: 75
              amountReceived: 0
              created: '2024-11-13T20:20:39+00:00'
              piClientSecret: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGI
              invoiceId: in_1MtHbELkdIwHu7ixl4OzzPMw
    PaymentMethod:
      description: |
        See https://docs.stripe.com/api/payment_methods/object
      type: object
      required:
        - name
        - lastFour
        - fingerprint
        - expireMonth
        - expireYear
      properties:
        name:
          type: string
          description: |
            User assigned name to help identify the card. Defaults to "type" + "lastFour"
        lastFour:
          type: string
          pattern: ^[0-9]{4}$
          description: |
            Maps to PaymentMethod.last_four in Stripe.
        fingerprint:
          type: string
          description: |
            Maps to PaymentMethod.fingerprint in Stripe. Used as hash.
        expireMonth:
          type: number
          description: |
            Maps to CustomerSession.exp_month in Stripe.
        expireYear:
          type: number
          description: |
            Maps to CustomerSession.exp_yea in Stripe.
      examples:
        - name: visa 5555
          lastFour: '5555'
          fingerprint: Xt5EWLLDS7FJjR1c
          expireMonth: 8
          expireYear: 2025
    Pharmacy:
      type: object
      properties:
        isPickup:
          description: |
            Implicit from whether the pharmacy comes from Perks XAPI or Healthdyne.
          type: boolean
        perksId:
          description: |
            Source Perks XAPI prices.data[].retailer.id or internal id for Healthdyne.
          type: string
        name:
          description: |
            Source Perks XAPI prices.data[].retailer.name or internal DB of Healthdyne drug prices.
          type: string
        location:
          description: |
            Source Perks XAPI prices.data[].retailer.location healthdyne will not have a location.
          $ref: '#/components/schemas/Address'
        businessHours:
          type: array
          items:
            $ref: '#/components/schemas/BusinessHours'
        availableDrugs:
          description: |
            Source Perks XAPI prices.data[].retailer.drug{.variant} or internal id for Healthdyne.
          type: array
          items:
            $ref: '#/components/schemas/DrugPricingInfo'
        totalPrice:
          description: |
            Source Summation of Perks XAPI prices.data[].retailer.price or internal DB of Healthdyne drug prices.
          $ref: '#/components/schemas/Price'
      examples:
        - isPickup: true
          perksId: '00605'
          name: Apci Choice (Hma 605)
          location:
            addressLine1: TEST MAIN
            addressLine2: Suite 102
            city: MINNEAPOLIS
            country: USA
            state: MN
            zipCode: '55401'
            phoneNumber: 256-555-5555
          businessHours:
            - open:
                day: Monday
                time: '8:00'
              close:
                day: Monday
                time: '18:00'
          availableDrugs:
            - ndc: '31722092601'
              formulationId: '72162199205'
              name: Methylphenidate
              couponId: '005947'
              price:
                amount: '10.50'
                currency: USD
                display: $10.50
          totalPrice:
            amount: '10.50'
            currency: USD
            display: $10.50
    PharmacyList:
      description: |
        Composite DTO for pharmacies endpoint.  Limited to 100 results.
      type: object
      properties:
        searchParameters:
          $ref: '#/components/schemas/PharmacyListSearchParameters'
        prescribedDrugs:
          description: |
            Source Fabric.visit.report.prescriptions, includes info from Perks API /prices
            This is a list of drugs and variants to allow the user to make a selection
          type: array
          items:
            $ref: '#/components/schemas/DrugVariantInfo'
        pharmacies:
          type: array
          items:
            $ref: '#/components/schemas/Pharmacy'
      examples:
        - searchParameters:
            ndc: 0169-4307-30
            patientId: '187'
            pharmacyName: CSV
            zipCode: '12345'
          prescribedDrugs:
            - ndc: '31722092601'
              formulationId: '72162199205'
              name: Methylphenidate
              variants:
                - ndc: '71376020103'
                  formulationId: '72162199205'
                  name: Jornay Pm
          pharmacies:
            - isPickup: true
              perksId: '00605'
              name: Apci Choice (Hma 605)
              location:
                addressLine1: TEST MAIN
                addressLine2: Suite 102
                city: MINNEAPOLIS
                country: USA
                state: MN
                zipCode: '55401'
                phoneNumber: 256-555-5555
              businessHours:
                - open:
                    day: Monday
                    time: '8:00'
                  close:
                    day: Monday
                    time: '18:00'
              availableDrugs:
                - ndc: '31722092601'
                  formulationId: '72162199205'
                  name: Methylphenidate
                  couponId: '005947'
                  price:
                    amount: '10.50'
                    currency: USD
                    display: $10.50
              totalPrice:
                amount: '10.50'
                currency: USD
                display: $10.50
    PharmacyListSearchParameters:
      type: object
      description: |
        Source: the get http call query parameters that resulted in the pharmacy list response.
      properties:
        ndc:
          type: string
        patientId:
          description: |
            Source Fabric patient.id
          type: string
        pharmacyName:
          description: |
            Source query parameter (optional)
          type: string
        zipCode:
          description: |
            Source Fabric patient.address OR query parameter
          type: string
      examples:
        - ndc: '0169430730'
          patientId: '187'
          pharmacyName: CSV
          zipCode: '12345'
    PharmacySelection:
      type: object
      properties:
        pharmacyControlNumber:
          description: |
            Maps to Fabric discount_card_pcn, only for retail
          type: string
        couponId:
          description: |
            Maps to Fabric discount_card_bin, only for retail
          type: string
        cardholderId:
          description: |
            Maps to Fabric discount_card_cardholder_id, only for retail
          type: string
        groupId:
          description: |
            Maps to Fabric discount_card_group_id, only for retail
          type: string
      examples:
        - pharmacyControlNumber: CLAIMCR
          couponId: '005947'
          cardholderId: APD1066745
          groupId: 1858CCC
    Prescription:
      type: object
      properties:
        drugName:
          type: string
        ndcCode:
          type: string
        quantity:
          type: integer
        strength:
          type: string
        refills:
          type: number
        drugForm:
          type: string
        daysSupply:
          type: integer
        description:
          type: string
      examples:
        - drugName: Amoxicillin
          ndcCode: 50090-0301
          quantity: 30
          strength: 500mg
          refills: 3
          drugForm: Tablet
          daysSupply: 10
          description: Take one tablet by mouth every 8 hours for 10 days.
    Price:
      type: object
      properties:
        amount:
          type: string
          examples:
            - '10.50'
          description: The decimal value of the price encoded as a string. String representation prevents encoding errors since JSON doesn't allow numeric precision to be specified. Clients should parse this value as a string and convert to decimal.
        currency:
          type: string
          description: The ISO 4217 currency code for this price.
          examples:
            - USD
        display:
          type: string
          examples:
            - $10.50
      examples:
        - amount: '10.50'
          currency: USD
          display: $10.50
    PriceRange:
      type: object
      properties:
        label:
          type: string
        minPrice:
          $ref: '#/components/schemas/Price'
        maxPrice:
          $ref: '#/components/schemas/Price'
      examples:
        - label: Total Price
          minPrice:
            amount: '10.50'
            currency: USD
            display: $10.50
          maxPrice:
            amount: '20.50'
            currency: USD
            display: $20.50
    ProgressBar:
      type: object
      properties:
        personalInformation:
          $ref: '#/components/schemas/ProgressBarItem'
        eligibility:
          $ref: '#/components/schemas/ProgressBarItem'
        interview:
          $ref: '#/components/schemas/ProgressBarItem'
        accountSetup:
          $ref: '#/components/schemas/ProgressBarItem'
        payment:
          $ref: '#/components/schemas/ProgressBarItem'
        doctorReview:
          $ref: '#/components/schemas/ProgressBarItem'
      examples:
        - personalInformation:
            index: 2
            name: Visit Purpose
          eligibility:
            index: 1
            name: Eligibility
          interview:
            index: 3
            name: Health History
          accountSetup:
            index: 4
            name: Account Setup
          payment:
            index: 5
            name: Payment
          doctorReview:
            index: 6
            name: Provider Review
    SessionData:
      type: object
      properties:
        clinicSerial:
          type: array
          items:
            type: string
        cosmosId:
          type: string
        fabricId:
          type: number
        fabricGVID:
          type: string
        fabricJwtExpires:
          type: string
        fabricJwtToken:
          type: string
        fabricMfaToken:
          type: string
        fabricLoggedIn:
          type: string
        sessionId:
          type: string
        sessionInvalidates:
          type: number
        tokenExpires:
          type: string
      examples:
        - clinicSerial:
            - '123456789'
            - '588834993'
          cosmosId: '123457890'
          fabricId: 123457890
          fabricGVID: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
          fabricJwtExpires: '2024-12-31'
          fabricMfaToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
          fabricLoggedIn: 'true'
          sessionId: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
          sessionInvalidates: 1
          tokenExpires: '2024-12-31'
    Token:
      description: |
        The token is used to authenticate the user for the duration of the tokenExpires time.
        The token is used in the header for all requests that require authentication.
      type: object
      properties:
        token:
          type: string
        tokenExpires:
          type: string
          format: date-time
        userId:
          type: integer
        passwordExpired:
          type: boolean
        roles:
          type: array
          items:
            type: string
        clinicSerial:
          type: string
        completedProfile:
          type: boolean
        phoneVerificationRequired:
          type: boolean
      required:
        - token
        - tokenExpires
        - userId
        - passwordExpired
        - roles
        - clinicSerial
      examples:
        - token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
          tokenExpires: '2024-05-26T10:15:00'
          userId: 987654
          passwordExpired: false
          roles:
            - user
          clinicSerial: CLN123456789
          completedProfile: true
          phoneVerificationRequired: false
    TokenVerify:
      type: object
      properties:
        confirmationToken:
          type: string
      examples:
        - confirmationToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
    TreatmentOptions:
      type: array
      items:
        type: object
        properties:
          perksId:
            description: Source Perks drug.id
            type: string
            format: uuid
            examples:
              - e82bfafb-eca1-4711-9156-b0f9fc8b54a7
          commonName:
            description: Source Perks drug.commonName
            type: string
            examples:
              - Minoxidil
          urlSlug:
            description: Source Perks drug.urlSlug
            type: string
            examples:
              - minoxidil
          formulationId:
            description: Source Perks drug.formulationId
            type: string
            format: uuid
          price:
            description: Source Perks drug.price or HealthDyne drug price (from DB) whichever is lower
            $ref: '#/components/schemas/Price'
          quantity:
            description: 'Source Perks drug.quantity or HealthDyne whichever price we use '
            type: number
            format: double
          drugType:
            description: Source Perks drug.drugType
            type: string
            enum:
              - BRAND
              - GENERIC
          description:
            description: Source Perks drug.descriptionText
            type: string
      examples:
        - - perksId: e82bfafb-eca1-4711-9156-b0f9fc8b54a7
            commonName: Minoxidil
            urlSlug: minoxidil
            formulationId: 84b18721-2493-4a31-a5ad-4d81dc1647e4
            price:
              amount: '8.50'
              currency: USD
              display: $8.50
            quantity: 30
            drugType: BRAND
            description: This medicine is an HMG-CoA reductase inhibitor (also known as a statin) used in combination with...
    TreatmentPlan:
      description: |
        The treatment plan is the result of a completed consult.
        It includes the patient information, the doctor who completed the consult,
        the prescriptions, and the triage options.
      type: object
      properties:
        fabricId:
          type: string
          format: uuid
        assessmentText:
          type:
            - string
            - 'null'
        patientId:
          type: string
          format: uuid
        patientFirstName:
          type: string
        patientLastName:
          type: string
        patientZip:
          type: string
        state:
          type: string
        patientBirthDate:
          type:
            - string
            - 'null'
        patientPhone:
          type:
            - string
            - 'null'
        chiefComplaint:
          type:
            - string
            - 'null'
        reasonForVisit:
          type:
            - string
            - 'null'
        prescriptions:
          type: array
          items:
            $ref: '#/components/schemas/Prescription'
        createdAt:
          type: string
          format: date-time
        finishedAt:
          type:
            - string
            - 'null'
          format: date-time
        headerText:
          type:
            - string
            - 'null'
        icdCode:
          type:
            - string
            - 'null'
        labelText:
          type:
            - string
            - 'null'
        requiredTriageOption:
          type: string
        tags:
          type:
            - array
            - 'null'
          items:
            type: string
        triageRequired:
          type: boolean
        patientMrn:
          type:
            - string
            - 'null'
        doctor:
          type:
            - object
            - 'null'
          properties:
            fabricId:
              type: string
              format: uuid
            firstName:
              type: string
            lastName:
              type: string
            title:
              type: string
        content:
          $ref: '#/components/schemas/TreatmentPlanSuccessContent'
      additionalProperties: false
      examples:
        - fabricId: f47ac10b-58cc-4372-a567-0e02b2c3d479
          assessmentText: You have a sinus infection.
          patientId: 9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d
          patientFirstName: Hans
          patientLastName: Moleman
          patientZip: '90210'
          state: CA
          patientBirthDate: '1980-01-01'
          patientPhone: 555-555-5555
          chiefComplaint: I have a sore throat.
          reasonForVisit: Cold, sinus infection, or flu
          prescriptions:
            - drugName: Amoxicillin
              ndcCode: 50090-0301
              quantity: 30
              strength: 500mg
              refills: 3
              drugForm: Tablet
              daysSupply: 10
              description: Take one tablet by mouth every 8 hours for 10 days.
          createdAt: '2024-05-26T09:46:00Z'
          finishedAt: '2024-05-26T10:02:00Z'
          headerText: Your treatment plan
          icdCode: J01.90
          labelText: Recommended medications
          requiredTriageOption: ScheduleDoctorVisit
          tags:
            - sinus infection
          triageRequired: true
          patientMrn: '123456'
          doctor:
            fabricId: 123e4567-e89b-12d3-a456-426614174000
            firstName: Nick
            lastName: Riviera
            title: MD
    TreatmentPlanComment:
      description: |
        Comment on treatment plan
      type: object
      properties:
        id:
          type: integer
        comment:
          type: string
        commentableId:
          type: integer
        commentableType:
          type: string
        createdAt:
          type: string
          format: date-time
        endsConversation:
          type: boolean
        needsReview:
          type: boolean
        reviewedByClinicianAt:
          type:
            - 'null'
            - string
          format: date-time
        targetAudience:
          type: array
          items:
            type: string
        title:
          type: string
        updatedAt:
          type: string
          format: date-time
        userId:
          type: integer
      examples:
        - id: 5809
          comment: 'Should I stop taking this if my symptoms improve?<br>Patient''s phone number is: 1 (320) 310-9771'
          commentableId: 109318
          commentableType: Visit
          createdAt: '2024-09-16T17:40:28Z'
          endsConversation: false
          needsReview: true
          reviewedByClinicianAt: null
          targetAudience:
            - doctor
          title: ''
          updatedAt: '2024-09-16T17:40:28Z'
          userId: 1769
    TreatmentPlanReport:
      description: |
        This returns the treatment plan detailed report that is generated after a completed consult.
        It includes the doctor summray, prescribed medications information, school/work notes, self care, visit follow up, and payment information.
      type: object
      properties:
        report:
          type: object
          properties:
            allowPatientComments:
              type: boolean
            clinicianFooter:
              type: string
            createdAt:
              type: string
              format: date
            commentableExpirationDate:
              type: string
              format: date-time
            completeBy:
              type: string
              format: date-time
            doctorSummary:
              type: string
            doctorSummaryBasicText:
              type: string
            hideSendMessages:
              type: boolean
            id:
              type: number
            orderTransactions:
              type: array
              items:
                type: object
                properties:
                  amount:
                    type: number
                  basePrice:
                    type: number
                  createdAt:
                    type: string
                    format: date-time
                  description:
                    type: string
                  freeVisitReason:
                    type:
                      - 'null'
                      - string
                  insuranceBilledAmount:
                    type:
                      - 'null'
                      - number
                  insuranceBilledAt:
                    type:
                      - 'null'
                      - string
                    format: date-time
                  insurancePaidAmount:
                    type:
                      - 'null'
                      - number
                  insurancePaidAt:
                    type:
                      - 'null'
                      - string
                    format: date-time
                  promoCode:
                    type:
                      - 'null'
                      - string
                  promoCodeAmount:
                    type:
                      - 'null'
                      - number
                  refundAmount:
                    type:
                      - 'null'
                      - number
                  transactionType:
                    type: string
                  zipGroupDiscountAmount:
                    type:
                      - 'null'
                      - number
            prescriptions:
              type: array
              items:
                $ref: '#/components/schemas/Prescription'
            prescriptionChangePeriodActive:
              type: boolean
            schoolWorkNote:
              type: object
              properties:
                evaluationDateCopy:
                  type: string
                firstDateOfAbsence:
                  type: string
                  format: date-time
                hideSendMessages:
                  type: boolean
                id:
                  type: number
                notes:
                  type:
                    - 'null'
                    - string
                returnMessageCopy:
                  type: string
                updatedAt:
                  type: string
                  format: date-time
            updatePrescriptionAccordionVisible:
              type: boolean
            updateTreatmentPlanVisible:
              type: boolean
        content:
          type: object
          properties:
            medicalEmergencyAttentionText:
              type: string
            callSupportInstruction:
              type: string
            oneMoreQuestionText:
              type: string
            oneMoreQuestionButtonText:
              type: string
      examples:
        - report:
            allowPatientComments: false
            clinicianFooter: Clinician Footer
            createdAt: '2024-08-29T21:06:03Z'
            commentableExpirationDate: '2024-08-30'
            completeBy: '2021-09-29T00:00:00Z'
            doctorSummary: |-
              <p><b>Dear Harsh,</b></p><p>Based on the information provided, you have <b>viral sinusitis</b>, also known as a sinus infection. Sinus infections are caused by bacteria or a virus and symptoms are almost always identical. The difference between the 2 types of infections is timing.</p><p>Sinus infections start as viral infections and symptoms improve on their own in about 7 days. A bacterial infection may have developed if any of the following apply to you:</p><ul>
              <li>You have had 7 days of symptoms and are experiencing at least 2 of the following:</li>
              <ul>
              <li>Fever</li>
              <li>Facial pressure or headache</li>
              <li>Green or yellow nasal mucus</li>
              <li>Symptoms that improved and then got worse again</li>
              </ul>
              <li>You have had symptoms for 10 or more days</li>
              </ul><h3>Medication information</h3><p>Because you have a viral infection, antibiotics will not help you get better. Treating a viral infection with antibiotics could actually make you feel worse.</p><p>I am prescribing:</p><ul><li>
              <b>Ibuprofen 800 mg oral tablet.</b> Take 1 tablet by mouth 3 times per day as needed for 7 days. Do not exceed 2400mg in 24 hours. There are no refills with this prescription.</li></ul><h3>Self care</h3><p>Steps you can take to be as comfortable as possible:</p><ul>
              <li>Rest.</li>
              <li>Drink plenty of fluids.</li>
              <li>Take a warm shower to loosen congestion</li>
              <li>Use a cool-mist humidifier.</li>
              <li>Use throat lozenges.</li>
              <li>Suck on frozen items such as popsicles.</li>
              <li>Drink hot tea with lemon and honey.</li>
              <li>Gargle with warm salt water (1/4 teaspoon of salt per 8 ounce glass of water).</li>
              </ul><h3>When to seek care</h3><p>Please be seen in a clinic or urgent care if any of the following occur:</p><ul><li>New symptoms develop, or symptoms become worse</li></ul><p><b>Call 911 or go to the emergency room if any of the following occur:</b></p><ul>
              <li>Difficulty breathing</li>
              <li>If you feel that your throat is closing off</li>
              <li>Suddenly develop a rash</li>
              <li>Unable to swallow fluids or are drooling</li>
              </ul><p>For the latest updates on COVID-19 (Coronavirus), please visit the <a href="https://www.cdc.gov/coronavirus/2019-ncov/index.html" target="_blank" rel="nofollow">Centers for Disease Control and Prevention (CDC)</a>. Also, your state and local health department websites may provide additional guidance regarding testing and isolation recommendations for your location.</p>
            doctorSummaryBasicText: |-
              Dear Harsh,

              Based on the information provided, you have viral sinusitis, also
              known as a sinus infection. Sinus infections are caused by
              bacteria or a virus and symptoms are almost always identical. The
              difference between the 2 types of infections is timing.

              Sinus infections start as viral infections and symptoms improve
              on their own in about 7 days. A bacterial infection may have
              developed if any of the following apply to you:

              * You have had 7 days of symptoms and are experiencing at least 2
              of the following:
              * Fever
              * Facial pressure or headache
              * Green or yellow nasal mucus
              * Symptoms that improved and then got worse again
              * You have had symptoms for 10 or more days

              Medication information
              ----------------------

              Because you have a viral infection, antibiotics will not help you
              get better. Treating a viral infection with antibiotics could
              actually make you feel worse.

              I am prescribing:

              * Ibuprofen 800 mg oral tablet. Take 1 tablet by mouth 3 times
              per day as needed for 7 days. Do not exceed 2400mg in 24 hours.
              There are no refills with this prescription.

              Self care
              ---------

              Steps you can take to be as comfortable as possible:

              * Rest.
              * Drink plenty of fluids.
              * Take a warm shower to loosen congestion
              * Use a cool-mist humidifier.
              * Use throat lozenges.
              * Suck on frozen items such as popsicles.
              * Drink hot tea with lemon and honey.
              * Gargle with warm salt water (1/4 teaspoon of salt per 8 ounce
              glass of water).

              When to seek care
              -----------------

              Please be seen in a clinic or urgent care if any of the following
              occur:

              * New symptoms develop, or symptoms become worse
              Call 911 or go to the emergency room if any of the following
              occur:

              * Difficulty breathing
              * If you feel that your throat is closing off
              * Suddenly develop a rash
              * Unable to swallow fluids or are drooling
              For the latest updates on COVID-19 (Coronavirus), please visit
              the Centers for Disease Control and Prevention (CDC) 
              ( https://www.cdc.gov/coronavirus/2019-ncov/index.html ). Also,
              your state and local health department websites may provide
              additional guidance regarding testing and isolation
              recommendations for your location.
            hideSendMessages: false
            id: 37362
            orderTransactions:
              - amount: 2500
                basePrice: 2500
                createdAt: '2024-08-29T17:41:30Z'
                description: 'ZIP(visit) #190507 to Optum Perks MN'
                freeVisitReason: null
                insuranceBilledAmount: null
                insuranceBilledAt: null
                insurancePaidAmount: null
                insurancePaidAt: null
                promoCode: null
                promoCodeAmount: null
                refundAmount: null
                transactionType: Visit
                zipGroupDiscountAmount: null
            prescriptions:
              - drugName: Amoxicillin
                ndcCode: 50090-0301
                quantity: 30
                strength: 500mg
                refills: 3
                drugForm: Tablet
                daysSupply: 10
                description: Take one tablet by mouth every 8 hours for 10 days.
            prescriptionChangePeriodActive: false
            schoolWorkNote:
              evaluationDateCopy: Harsh Patel has been evaluated and received care on 8/29/2024.
              firstDateOfAbsence: '2024-08-29T00:00:00Z'
              hideSendMessages: false
              id: 2452
              notes: null
              returnMessageCopy: Harsh can return to school/work without restrictions on 9/3/2024.
              updatedAt: '2024-08-29T21:06:03Z'
            updatePrescriptionAccordionVisible: false
            updateTreatmentPlanVisible: false
          content:
            medicalEmergencyAttentionText: |
              <span class="attention-color">If you are experiencing a medical emergency, please call</span>
              <a class="attention-color" href="tel:911" style="text-decoration: none; cursor: default;" rel="nofollow">911</a>
            callSupportInstruction: 'If your question is not specific to your visit treatment plan, please contact Customer Support: <a class="footer-support-phone" style="text-decoration: none; cursor: default;" rel="nofollow">(866) 714-3330</a>'
            oneMoreQuestionText: Please enter your question and a phone number you can be reached at if the provider needs to contact you.
            oneMoreQuestionButtonText: Send message
    Visit:
      type: object
      properties:
        id:
          type: string
          format: uuid
      examples:
        - id: 123e4567-e89b-12d3-a456-426614174000
    VisitInput:
      type: object
      properties:
        conditionLabel:
          type: string
          description: |
            This allows the visit's condition, also known as reason for visit, to be preset at the start of the visit. If this parameter is omitted, the reason_for_visit will be left unset, and the visit will later prompt for a reason for visit.
        locationState:
          description: Condition label is optional. If provided, location state is also required.
          type: string
      examples:
        - conditionLabel: cp_9q_449a_acne
          locationState: MN
    Error401Unauthorized:
      description: The request is missing a valid token.
      type: object
      properties:
        status:
          type: number
        message:
          type: string
      examples:
        - status: 401
          message: Unauthorized
    Error404NotFound:
      description: The requested resource was not found.
      type: object
      properties:
        status:
          type: number
        message:
          type: string
      examples:
        - status: 404
          message: Resource not found
    Error400BadRequest:
      description: Bad Request
      type: object
      properties:
        status:
          type: number
        message:
          type: string
      examples:
        - status: 400
          message: Bad Request
    Error403Forbidden:
      description: Forbidden
      type: object
      properties:
        status:
          type: number
        message:
          type: string
      examples:
        - status: 403
          message: 403 Forbidden
    Error422UnprocessableEntity:
      description: Unprocessable Entity
      type: object
      properties:
        status:
          type: number
        errors:
          type: array
          items:
            type: object
            properties:
              message:
                type: string
              reason:
                type: string
        message:
          type: string
      examples:
        - status: 422
          errors:
            - message: <field> can't be blank
              reason: <field_id>
          message: Unprocessable Entity
    ConditionMappingCsv:
      type: object
      properties:
        rows:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
                examples:
                  - 123
              name:
                type: string
                examples:
                  - '123'
              commonName:
                type: string
                examples:
                  - '123'
              urlSlug:
                type: string
                examples:
                  - '123'
              fabricLabel:
                type: string
                examples:
                  - '123'
            required:
              - id
              - name
              - commonName
              - urlSlug
              - fabricLabel
      examples:
        - rows:
            - id: 3139
              name: Acute Tenosynovitis
              commonName: Tenosynovitis
              urlSlug: tenosynovitis,
              fabricLabel: cp_7q_449a_bladderinfection
    ProgressBarItem:
      type: object
      properties:
        index:
          type: number
        name:
          type: string
      required:
        - index
        - name
      examples:
        - index: 1
          name: Eligibility
    ContentLabels:
      type: object
      properties:
        formTitle:
          type: string
        forMyselfOption:
          type: string
        forSomeoneOption:
          type: string
        aboutYourselfText:
          type: string
        ageLabel:
          type: string
        locationLabel:
          type: string
        aboutPatientText:
          type: string
        continueButton:
          type: string
        dropdownStatePlaceholder:
          type: string
        dropdownStateNotListed:
          type: string
        myAgeLabel:
          type: string
        backButton:
          type: string
        personalSex:
          type: string
        sex:
          type: object
          properties:
            female:
              type: string
              enum:
                - Female
            male:
              type: string
              enum:
                - Male
        states:
          type: array
          items:
            type: object
            properties:
              abbreviation:
                type: string
              name:
                type: string
    Action:
      type: object
      properties:
        continue:
          type: object
          properties:
            actionLabel:
              type: string
              enum:
                - Continue
                - Select
        goBack:
          type: object
          properties:
            actionLabel:
              type: string
              enum:
                - Back
      examples:
        - continue:
            actionLabel: Continue
          goBack:
            actionLabel: Back
    GuestVisitEligibility:
      type: object
      properties:
        stateName:
          type: string
        title:
          type: string
        progressBar:
          $ref: '#/components/schemas/ProgressBar'
        contentLabels:
          $ref: '#/components/schemas/ContentLabels'
        actions:
          $ref: '#/components/schemas/Action'
        errorDescriptions:
          type: object
          description: |
            #### Front end error descriptions

            - **errorCode**: Front end can use this to map to specific error.
            - **errorDescription**: Description of the error defined by CMS / Product team.
          additionalProperties:
            type: string
      examples:
        - stateName: eligibility
          title: Eligibility
          progressBar:
            accountSetup:
              index: 1
              name: Account Setup
            eligibility:
              index: 2
              name: Eligibility
            doctorReview:
              index: 4
              name: Provider Review
            interview:
              index: 3
              name: Interview
            payment:
              index: 5
              name: Payment
            personalInformation:
              index: 6
              name: Personal Information
          contentLabels:
            formTitle: Who is this visit for?
            forMyselfOption: Myself
            forSomeoneOption: Someone Else
            aboutYourselfText: Tell us about yourself
            ageLabel: Age
            locationLabel: Current location
            aboutPatientText: Tell us about the patient
            continueButton: Continue
            dropdownStatePlaceholder: State
            dropdownStateNotListed: My state isn't listed
            myAgeLabel: My Age
            backButton: Back
            personalSex: Sex Assigned at Birth
            sex:
              female: Female
              male: Male
            states:
              - abbreviation: MN
                name: Minnesota
    PatientList:
      type: object
      required:
        - patients
      properties:
        patients:
          type: array
          items:
            type: object
            required:
              - id
              - email
              - firstName
              - lastName
              - birthDate
              - insuranceCarrier
              - insuranceGroup
              - insuranceGroupId
              - insuranceId
              - mobilePhone
              - smsNotify
              - canChangePassword
              - phone
              - address
              - pendingVisits
            properties:
              id:
                type: number
              email:
                type: string
              firstName:
                type: string
              lastName:
                type: string
              birthDate:
                type: string
              insuranceCarrier:
                type:
                  - string
                  - 'null'
              insuranceGroup:
                type:
                  - string
                  - 'null'
              insuranceGroupId:
                type:
                  - string
                  - 'null'
              insuranceId:
                type:
                  - string
                  - 'null'
              mobilePhone:
                type:
                  - string
                  - 'null'
              smsNotify:
                type: boolean
              canChangePassword:
                type: boolean
              phone:
                type: string
              address:
                type: object
                required:
                  - id
                  - address1
                  - address2
                  - city
                  - country
                  - phone
                  - state
                  - zip
                  - fullAddress
                  - latitude
                  - longitude
                properties:
                  id:
                    type: number
                  address1:
                    type: string
                  address2:
                    type:
                      - string
                      - 'null'
                  city:
                    type: string
                  country:
                    type:
                      - string
                      - 'null'
                  phone:
                    type:
                      - string
                      - 'null'
                  state:
                    type: string
                  zip:
                    type: string
                  fullAddress:
                    type: string
                  latitude:
                    type:
                      - number
                      - 'null'
                  longitude:
                    type:
                      - number
                      - 'null'
              pendingVisits:
                type: number
      examples:
        - patients:
            - id: 44
              email: dev@rvohealth.com
              firstName: Gugli
              lastName: Macaroni
              birthDate: '1981-03-31'
              insuranceCarrier: null
              insuranceGroup: null
              insuranceGroupId: null
              insuranceId: null
              mobilePhone: null
              smsNotify: false
              canChangePassword: true
              phone: '16125551234'
              address:
                id: 45
                address1: 902 Hannah Crest
                address2: null
                city: Minneapolis
                country: USA
                phone: ''
                state: MN
                zip: '55401'
                fullAddress: 902 Hannah Crest,  Minneapolis, MN 55401
                latitude: null
                longitude: null
              pendingVisits: 2
    PaymentDiscount:
      description: |
        See https://docs.stripe.com/api/promotion_codes/list
      type: object
      properties:
        active:
          type: boolean
          description: |
            Maps from PromotionsCode.active in Stripe
        code:
          type: string
          description: |
            Maps from PromotionsCode.code in Stripe
        couponId:
          type: string
          description: |
            Maps from PromotionsCode.coupon.id in Stripe
        amountOff:
          type: number
          description: |
            Maps from PromotionsCode.coupon.amount_off in Stripe
        percentOff:
          type: number
          description: |
            Maps from PromotionsCode.coupon.percent_off in Stripe
      examples:
        - active: true
          code: A1H1Q1MG
          couponId: nVJYDOag
          amountOff: 0
          percentOff: 25.5
    PaymentMethods:
      description: |
        See https://docs.stripe.com/api/payment_methods/object
      type: array
      items:
        $ref: '#/components/schemas/PaymentMethod'
      examples:
        - - name: visa 5555
            lastFour: '5555'
            fingerprint: Xt5EWLLDS7FJjR1c
            expireMonth: 8
            expireYear: 2025
          - name: amex 3555
            lastFour: '3555'
            fingerprint: Ut5EWLLDS7FJjR1c
            expireMonth: 5
            expireYear: 2027
    GVID:
      description: |
        This cookie need to be passed in subsequent calls to endpoints for the guest visit that was created.
      type: object
      properties:
        gvid:
          type: string
      required:
        - gvid
      examples:
        - gvid: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
    TreatmentPlanSuccessContent:
      description: |
        Static content indicating that a treament plan has successfully been created.
      type: object
      properties:
        treatmentPlanCreatedFirstPerson:
          type: string
        treatmentPlanCreatedThirdPerson:
          type: string
        treatmentPlanAvailable:
          type: string
      additionalProperties: false
      examples:
        - treatmentPlanCreatedFirstPerson: Thank you for using Optum Perks Online Care! Your provider has reviewed your symptoms and created a treatment plan.
          treatmentPlanCreatedThirdPerson: Thank you for using Optum Perks Online Care! A provider has reviewed Hans's symptoms and created a treatment plan.
          treatmentPlanAvailable: Your Treatment Plan is Available.
  parameters:
    visit-id:
      name: visit-id
      in: path
      description: The visit id for a treatment
      required: true
      schema:
        type: string
        format: uuid
      examples:
        exampleVisitId:
          summary: Example visit ID
          value: 9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d
    account-id:
      name: account-id
      in: path
      required: true
      schema:
        type: string
      description: A patient account id.
      examples:
        exampleAccountId:
          summary: Example of an Account Id
          value: '88315'
    pharmacy-id:
      name: pharmacy-id
      in: path
      description: |
        The pharmacy id in Perks XAPI (ideally a universal one)
      required: true
      schema:
        type: string
      examples:
        exampleVisitId:
          summary: Example pharmacy ID
          value: '00605'
    pi-secret:
      name: pi-secret
      in: path
      required: true
      schema:
        type: string
        pattern: ^[a-z0-9_]+$
      description: |
        The client secret associated with a patient intent in stripe.  Represents an invoice and payment(s) that 
        a customer has incurred and paid.
      examples:
        simpleExample:
          summary: Example Payment Intent client secret
          value: pi_3MtwBwLkdIwHu7ix28a3tqPa_secret_YrKJUKribcBjcG8HVhfZluoGH
    payment-method-name:
      name: patient-method-name
      in: path
      description: The name associated with payment method
      required: true
      schema:
        type: string
      examples:
        examplePatientName:
          summary: Example Payment Method Name
          value: visa-9999
    url-slug:
      name: url-slug
      in: path
      required: true
      schema:
        type: string
        pattern: ^[a-z0-9-]+$
      description: |
        The url-slug of a health condition.  Normally this is the Perks XAPI url-slug.  However,
        in some cases, to allow for reverse lookup it is a slugged version of the Fabric condition name.
      examples:
        exampleConditionUrlSlug:
          summary: Example Condition Url Slug
          value: urinary-tract-infection
    Accept-Language:
      name: Accept-Language
      in: header
      description: |
        Specifies which language the client is able to understand. When specified, the server should localize dynamic data, like prices and content, based on the specified language code. Static labels on the client, like headings and button labels, will be localized on the client.
      schema:
        type: string
      examples:
        english:
          summary: English (United States)
          value: en-US
    Content-Type:
      name: Content-Type
      in: header
      description: |
        Used to indicate the original media type of the resource.
      schema:
        type: string
      examples:
        for-images:
          value: application/x-www-form-urlencoded
    User-Agent:
      name: User-Agent
      in: header
      description: |
        For native apps, User-Agent must be present with the following format: Optum Perks/[App Version]/[Build] ([Platform]; [OS Version]; [Model]).

        For web apps, the browser's default User-Agent is expected.
      schema:
        type: string
      examples:
        androidExample:
          summary: Example for an Android device
          value: Optum Perks/1.1.0/2020092401 (Android; 7.0; Pixel 3a)
        iosExample:
          summary: Example for an iOS device
          value: Optum Perks/1.1.0/2020092401 (iOS; 13.6; iPhone10,6)
    Ocp-Apim-Subscription-Key:
      name: Ocp-Apim-Subscription-Key
      in: header
      description: |
        Holds the api key for Azure APIM
      schema:
        type: string
        format: uuid
      examples:
        basic-example:
          value: 72ec7cc7-9670-4386-9145-5f91b40ca9b5
    x-admin-key:
      $ref: '#/components/parameters/X-Admin-Key'
    category:
      name: category
      in: query
      required: false
      schema:
        type: string
      description: Query conditions by category
      examples:
        exampleQuery:
          summary: Example query
          value: Acne
    imageId:
      name: imageId
      in: query
      description: The uploaded image ID for a guest visit / visit interaction
      required: true
      schema:
        type: number
      examples:
        exampleImageId:
          summary: Example image ID
          value: 17180
    pharmacyName:
      name: pharmacyName
      in: query
      description: Pharmacy name to look for.
      required: false
      schema:
        type: string
      examples:
        nameExample:
          value: CVS
          summary: An example start of a pharmacy name  to search for
    ndc:
      name: ndc
      in: query
      description: National Drug Code.
      required: false
      schema:
        type: string
      examples:
        ndcExample:
          value: '0169430730'
          summary: An example NDC
    zipCode:
      name: zipCode
      in: query
      description: Zip Code of an area.
      required: false
      schema:
        type: string
      examples:
        zipCodeExample:
          value: '12345'
          summary: An example Zip Code
    searchQuery:
      name: searchQuery
      in: query
      description: Search query string to get matching results.
      required: false
      schema:
        type: string
      examples:
        searchQueryExample:
          value: methen
          summary: An example search query to get all drug names starting with "methen"
    GVID:
      name: GVID
      in: cookie
      description: |
        This cookie acts as a temporary access token that must be retained and sent in subsequent guest_visits requests. The cookie expires in two hours. There is no option to refresh the token so the guest visit must be completed within the timeframe.
      required: true
      schema:
        type: string
      examples:
        GVIDCookieExample:
          summary: Example GVID cookie
          value: 9QVmrGhIP3Q2CzBJXSh7HOY8T4jOdEBiT%2B4X2w4Tizkio6csjbe3M3Cfs5ZMZ7nCXDcxzHA3wyNSO6e%2FfyfLOsvb0isFaAl53z%2Fd6bDafGlyQmimRfItZwbA6BplcKglhurCGr3tOMKgpDi7h4pGiZnK%2BJ2K--FeG4KN4JaX83oV%2B4--s7UxQO4w%2BDjray3ieUTKuw%3D%3D;
    condition-legacy:
      name: condition-legacy
      in: path
      required: true
      schema:
        type: string
        pattern: ^[a-z0-9_-]+$
      description: |
        Legacy for existing tests. Allows url-slugs and fabric labels as options.
      examples:
        exampleConditionLegacyLabel:
          summary: Example Condition Fabric Label
          value: cp_9q_449a_acne
        exampleConditionLegacySlug:
          summary: Example Condition Url Slug
          value: urinary-tract-infection
    condition-label:
      name: condition-label
      in: path
      required: true
      schema:
        type: string
        pattern: ^[a-z0-9_]+$
      description: The Fabric label of a condition
      examples:
        exampleConditionLabel:
          summary: Example Condition Label
          value: cp_9q_449a_acne
    name:
      name: name
      in: query
      description: String to look for in Drug description field.
      required: false
      schema:
        type: string
      examples:
        nameExample:
          value: tazora
          summary: An example drug name or description to search for
    promo-code:
      name: promo-code
      in: path
      required: true
      schema:
        type: string
      description: |
        A promo code entered buy the user.
      examples:
        simpleExample:
          summary: Promotion Code
          value: A1H1Q1MG
    X-Admin-Key:
      name: x-admin-key
      in: header
      description: |
        Admin Key for Admin tagged endpoints
      schema:
        type: string
      examples:
        basic-example:
          value: totally_legit_admin_key
    patient-name:
      name: patient-name
      in: path
      description: The first name of a patient
      required: true
      schema:
        type: string
        format: uuid
      examples:
        examplePatientName:
          summary: Example Patient Name
          value: Hans
  examples:
    allergyNames:
      value:
        - id: 1000730
          name: Acrylic Acid and Acrylates
        - id: 2000941
          name: Actidose-Aqua
        - id: 2014289
          name: Aceta-Gesic (with phenyltolox)
        - id: 2015141
          name: Acel-Imune
        - id: 2113878
          name: Otosporin(Al-boric,acet acids)
    clinicalInterviewInteraction:
      value:
        stateName: clinical_interview
        title: Interview Question
        progressBar:
          accountSetup:
            index: 1
            name: Account Setup
          eligibility:
            index: 2
            name: Eligibility
          doctorReview:
            index: 4
            name: Provider Review
          interview:
            index: 3
            name: Interview
          payment:
            index: 5
            name: Payment
          personalInformation:
            index: 6
            name: Personal Information
        content:
          - contentType: select_input
            contentName: q775
            contentLabel: <p>Almost done! Photos of the affected area of the skin are required to diagnose and treat you.</p><p><b>Can photos be taken and uploaded at this time?</b></p>
            options:
              - optionLabel: 'Yes'
                optionValue: 'yes'
              - optionLabel: 'No'
                optionValue: 'no'
            required: true
        errorDescriptions:
          medicationsAddError: There was an error adding your medication.
          medicationsDeleteError: There was an error deleting your medication.
          medicationsDiscontinuedError: There was an error discontinuing your medication.
          medicationsGetError: There was an error getting a list of your medications.
        progress:
          clinical_interview:
            percentage: 28.4
        actions:
          continue:
            actionLabel: Continue
          goBack:
            actionLabel: Back
    currentMedicationsInteraction:
      value:
        stateName: current_medications
        title: Current Medications
        progressBar:
          accountSetup:
            index: 1
            name: Account Setup
          eligibility:
            index: 2
            name: Eligibility
          doctorReview:
            index: 4
            name: Provider Review
          interview:
            index: 3
            name: Interview
          payment:
            index: 5
            name: Payment
          personalInformation:
            index: 6
            name: Personal Information
        content:
          - contentType: lookup_list_input
            contentName: current_medication_ids
            contentLabel: Medication list
            lookupApiUrl: https://online-care-stage.perks.optum.com/erx_tools/drug_names?q=
        errorDescriptions:
          medicationsAddError: There was an error adding your medication.
          medicationsDeleteError: There was an error deleting your medication.
          medicationsDiscontinuedError: There was an error discontinuing your medication.
          medicationsGetError: There was an error getting a list of your medications.
        actions:
          continue:
            actionLabel: Continue
          goBack:
            actionLabel: Back
    drugNames:
      value:
        - id: 2009551
          name: Cystex (methenamine-benz acid)
        - id: 2253445
          name: Cystex Plus (methenamine-sal)
        - id: 6144837
          name: infant formula, metabolic, methionine-free oral
        - id: 6144916
          name: nutritional treatment, metabolic, methionine-free oral
        - id: 6148869
          name: methenamine-methylene blue-sod phos-p.salicy-hyoscyamin oral
    imageUploadInteraction:
      value:
        stateName: photo_upload
        title: Photo Upload
        progressBar:
          accountSetup:
            index: 1
            name: Account Setup
          eligibility:
            index: 2
            name: Eligibility
          doctorReview:
            index: 4
            name: Provider Review
          interview:
            index: 3
            name: Interview
          payment:
            index: 5
            name: Payment
          personalInformation:
            index: 6
            name: Personal Information
        content:
          - contentType: image_upload
            contentName: condition_photos
            contentLabel: <b>Please upload 2 to 3 photos for your provider to review.</b>
            minCount: 2
            maxCount: 3
            postUrl: https://online-care-stage.perks.optum.com/api/v1/guest_visits/6496aec8-2f45-4186-9e71-ccfe515fb9f3/create_image
        errorDescriptions:
          medicationsAddError: There was an error adding your medication.
          medicationsDeleteError: There was an error deleting your medication.
          medicationsDiscontinuedError: There was an error discontinuing your medication.
          medicationsGetError: There was an error getting a list of your medications.
        actions:
          continue:
            actionLabel: Continue
          goBack:
            actionLabel: Back
    promptToRegisterInteraction:
      value:
        stateName: prompt_to_register
        title: Thanks, just a few more things!
        progressBar:
          accountSetup:
            index: 1
            name: Account Setup
          eligibility:
            index: 2
            name: Eligibility
          doctorReview:
            index: 4
            name: Provider Review
          interview:
            index: 3
            name: Interview
          payment:
            index: 5
            name: Payment
          personalInformation:
            index: 6
            name: Personal Information
        content:
          - contentType: free_text_input
            contentName: first_name
            contentLabel: Legal First Name
            required: true
            maxLength: 50
          - contentType: free_text_input
            contentName: middle_name
            contentLabel: Legal Middle Name
            required: true
            maxLength: 50
          - contentType: free_text_input
            contentName: last_name
            contentLabel: Legal Last Name
            required: true
            maxLength: 50
          - contentType: free_text_input
            contentName: phone
            contentLabel: Phone
            required: true
            maxLength: 16
          - contentType: date_input
            contentName: birth_date
            contentLabel: Birth Date (MM/DD/YYYY)
            required: true
          - contentType: free_text_input
            contentName: email
            contentLabel: Email address
            required: true
            maxLength: 254
          - contentType: free_text_input
            contentName: password
            contentLabel: Password
            required: true
            maxLength: 72
          - contentType: free_text_input
            contentName: password_confirmation
            contentLabel: Password Confirmation
            required: true
            maxLength: 72
          - contentType: yes_no_input
            contentName: legal_agreement
            contentLabel: I agree to the <a id=\"terms_of_service_link\" href=\"/terms_of_service\">Terms of Service</a> and <a id=\"privacy_policy_link\" href=\"/privacy\">Privacy Policy</a>.
        errorDescriptions:
          medicationsAddError: There was an error adding your medication.
          medicationsDeleteError: There was an error deleting your medication.
          medicationsDiscontinuedError: There was an error discontinuing your medication.
          medicationsGetError: There was an error getting a list of your medications.
        actions: {}
    reasonForVisitInteraction:
      value:
        stateName: reason_for_visit
        title: What is the reason for this visit?
        progressBar:
          accountSetup:
            index: 1
            name: Account Setup
          eligibility:
            index: 2
            name: Eligibility
          doctorReview:
            index: 4
            name: Provider Review
          interview:
            index: 3
            name: Interview
          payment:
            index: 5
            name: Payment
          personalInformation:
            index: 6
            name: Personal Information
        content:
          - contentType: select_input
            contentName: reason
            contentLabel: ''
            required: true
            options:
              - optionValue: cp_9q_449a_acne
                optionLabel: Acne
                meta:
                  restrictions:
                    - Available for ages 12 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 12
                    establishedPatientsOnly: null
              - optionValue: cp_218q_449a_reason
                optionLabel: Altitude sickness prevention
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_177q_449a_reason
                optionLabel: Anti-aging skin treatments
                meta:
                  restrictions:
                    - Available for ages 18+ years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: null
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_14q_449a_asthma
                optionLabel: Asthma medication refill
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: false
              - optionValue: cp_13q_843a_athletesfoot
                optionLabel: Athlete's foot
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_26q_449a_burn
                optionLabel: Burns (minor) and sunburns
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: null
              - optionValue: cp_12q_449a_covid19coronavirus
                optionLabel: COVID-19
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_184q_449a_reason
                optionLabel: COVID-19 treatments
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_11q_449a_oralmouthsores
                optionLabel: Canker sore
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: false
              - optionValue: cp_24q_449a_Visit
                optionLabel: Chlamydia exposure
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_11q_449a_coldsoreorfeverblister
                optionLabel: Cold sore or fever blister
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: false
              - optionValue: cp_11q_449a_preventingcoldsores
                optionLabel: Cold sore prevention
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: false
              - optionValue: cp_12q_449a_respiratory
                optionLabel: Cold, sinus infection, or flu
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_11q_449a_cracksonthecornerofthelips
                optionLabel: Cracks on the corner of the lips
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: false
              - optionValue: cp_181q_449a_reason
                optionLabel: Dental pain
                meta:
                  restrictions:
                    - Available for ages 12 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 12
                    establishedPatientsOnly: null
              - optionValue: cp_4q_12a_yes
                optionLabel: Diaper rash
                meta:
                  restrictions:
                    - Available for ages 3 to 3 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 3
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_222q_449a_reason
                optionLabel: ER visit follow-up (video required)
                meta:
                  restrictions:
                    - Available for ages 12 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 12
                    establishedPatientsOnly: null
              - optionValue: cp_15q_449a_Visit
                optionLabel: Eczema
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: false
              - optionValue: cp_19q_449a_epi
                optionLabel: EpiPen medication refill
                meta:
                  restrictions:
                    - Available for ages 4 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 4
                    establishedPatientsOnly: false
              - optionValue: cp_23q_449a_Visit
                optionLabel: Erectile dysfunction
                meta:
                  restrictions:
                    - Available to males only.
                    - Available for ages 40 to 75 years old.
                  eligibilitySettings:
                    patientGender: male
                    patientMaxAge: 75
                    patientMinAge: 40
                    establishedPatientsOnly: false
              - optionValue: cp_36q_449a_reason
                optionLabel: Eyelash lengthening
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_41q_449a_reason
                optionLabel: Flu exposure
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_130q_449a_reason
                optionLabel: General medication refill
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_176q_449a_reason
                optionLabel: Genital herpes medication refill
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_34q_449a_reason
                optionLabel: Head lice
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_6q_12a_GERD
                optionLabel: Heartburn or acid reflux
                meta:
                  restrictions:
                    - Available for ages 18 to 64 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 64
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_219q_449a_reason
                optionLabel: Heel pain
                meta:
                  restrictions:
                    - Available for ages 16 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 16
                    establishedPatientsOnly: null
              - optionValue: cp_11q_449a_impetigo
                optionLabel: Impetigo
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: false
              - optionValue: cp_209q_449a_reason
                optionLabel: Insect bite or sting
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_13q_843a_jockitch
                optionLabel: Jock itch
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_32q_449a_lowbackpain
                optionLabel: Low back pain
                meta:
                  restrictions:
                    - Available for ages 18 to 64 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 64
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_17q_449a_preventionofmalaria
                optionLabel: Malaria prevention
                meta:
                  restrictions:
                    - Available for ages 6 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 6
                    establishedPatientsOnly: null
              - optionValue: cp_35q_449a_reason
                optionLabel: Male pattern baldness
                meta:
                  restrictions:
                    - Available to males only.
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: male
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: false
              - optionValue: cp_213q_449a_shorttermmigrainemedicationrefills
                optionLabel: Migraine medication refill
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_3q_14a_motionsicknessprevention
                optionLabel: Motion sickness prevention
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_33q_449a_reason
                optionLabel: Nail condition
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_2q_12a_pinkeye
                optionLabel: Pink eye
                meta:
                  restrictions:
                    - Available for ages 3 to 64 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 64
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_171q_449a_reason
                optionLabel: Post-COVID discharge (video required)
                meta:
                  restrictions:
                    - Available for ages 18+ years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: null
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_185q_449a_reason
                optionLabel: Prediabetes screening
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_18q_633a_tobacco
                optionLabel: Quit smoking
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: false
              - optionValue: cp_13q_843a_tinea
                optionLabel: Ringworm (fungal skin infection)
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_9q_449a_rosacea
                optionLabel: Rosacea
                meta:
                  restrictions:
                    - Available for ages 12 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 12
                    establishedPatientsOnly: null
              - optionValue: cp_1q_1313a_hayfeverorallergies
                optionLabel: Seasonal allergies
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_27q_449a_shingles
                optionLabel: Shingles
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_15q_449a_poisonivyorothercontactdermatitis
                optionLabel: Skin irritation (contact dermatitis)
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: false
              - optionValue: cp_10q_449a_IBS
                optionLabel: Stomach issues
                meta:
                  restrictions:
                    - Available for ages 12 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 12
                    establishedPatientsOnly: null
              - optionValue: cp_2q_12a_styebumporbumpsontheeyelid
                optionLabel: Stye (bump or bumps on the eyelid)
                meta:
                  restrictions:
                    - Available for ages 3 to 64 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 64
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_44q_449a_reason
                optionLabel: Swimmer's ear
                meta:
                  restrictions:
                    - Available for ages 3 to 64 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 64
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_16q_12a_deertickbitelymediseaseprevention
                optionLabel: Tick bite
                meta:
                  restrictions:
                    - Available for ages 5 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 5
                    establishedPatientsOnly: false
              - optionValue: cp_220q_449a_reason
                optionLabel: Travel health kit
                meta:
                  restrictions:
                    - Available for ages 13 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 13
                    establishedPatientsOnly: null
              - optionValue: cp_182q_449a_reason
                optionLabel: Travelers' diarrhea
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: null
              - optionValue: cp_227q_449a_reason
                optionLabel: Tuberculosis screening
                meta:
                  restrictions:
                    - Available for ages 18 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 18
                    establishedPatientsOnly: false
              - optionValue: cp_49q_449a_reason
                optionLabel: Unknown or other skin condition
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
              - optionValue: cp_42q_449a_reason
                optionLabel: Whooping cough exposure
                meta:
                  restrictions:
                    - Available for ages 3 to 75 years old.
                  eligibilitySettings:
                    patientGender: null
                    patientMaxAge: 75
                    patientMinAge: 3
                    establishedPatientsOnly: null
        errorDescriptions:
          medicationsAddError: There was an error adding your medication.
          medicationsDeleteError: There was an error deleting your medication.
          medicationsDiscontinuedError: There was an error discontinuing your medication.
          medicationsGetError: There was an error getting a list of your medications.
        actions:
          continue:
            actionLabel: Select
    all-data:
      value:
        conditionDetails:
          commonName: Urinary Tract Infection
          ctaButton: Start your UTI evaluation today
          description: |
            A urinary tract infection, or UTI, occurs when bacteria develop in any part
            of your urinary tract, causing an infection. Any infection that enters the
            urinary tract should be treated with a full course of antibiotics within the
            first week to avoid long-term damage and complications. If not treated
            early, bacteria may spread to the bladder and kidneys, increasing the risk
            of hospitalization.
          heading: Get fast, convenient care for UTIs. No appointment needed.
          label: cp_7q_449a_bladderinfection
          name: Urinary tract infection (UTI)
          urlSlug: urinary-tract-infection
          icon:
            altText: femaleBladderInfection
            darkModeImageUrl: |
              https://assets.zipnosis.com/PatientInterface/Conditions/bacterialvaginosis-b.webp
            imageUrl: |
              https://assets.zipnosis.com/PatientInterface/Conditions/bacterialvaginosis-b.webp
        fulfillmentOptions:
          retail:
            drugNames:
              - Amoxicillin Clavulanate
              - Cefixime
              - Sulfadiazine
              - Unasyn Bulk Pack
            priceRange:
              label: Total cost
              maxPrice:
                amount: '226.08'
                currency: USD
                display: $226.08
              minPrice:
                amount: '11.50'
                currency: USD
                display: $11.50
        treatmentOptions:
          - perksId: 0199000220|Amoxicillin Clavulanate
            commonName: Amoxicillin Clavulanate
            urlSlug: amoxicillin-clavulanate
            formulationId: '00781185220'
            price:
              amount: '11.50'
              currency: USD
              display: $11.50
            quantity: 20
            drugType: BRAND
          - perksId: 0230006000|Cefixime
            commonName: Cefixime
            urlSlug: cefixime
            formulationId: '67877058450'
            price:
              amount: '24.46'
              currency: USD
              display: $24.46
            quantity: 2
            drugType: BRAND
          - perksId: 0800002000|Sulfadiazine
            commonName: Sulfadiazine
            urlSlug: sulfadiazine
            formulationId: '38779055003'
            price:
              amount: '226.08'
              currency: USD
              display: $226.08
            quantity: 240
            drugType: BRAND
          - perksId: 0199000225|Unasyn Bulk Pack
            commonName: Unasyn Bulk Pack
            urlSlug: unasyn-bulk-pack
            formulationId: '00641611610'
            price:
              amount: '63.02'
              currency: USD
              display: $63.02
            quantity: 30
            drugType: BRAND
    fabric-only:
      value:
        conditionDetails:
          commonName: COVID-19
          ctaButton: Start your COVID-19 evaluation today
          description: |
            COVID-19 is a type of upper respiratory infection. Both cold and COVID-19
            have similar symptoms, so it can be hard to tell if you have a cold or
            COVID-19. Common symptoms of COVID-19 include but are not limited to fever,
            cough, body aches, loss of taste or smell, and shortness of breath. These
            symptoms appear 2-14 days after you are exposed to the virus that causes
            COVID-19. 


            COVID-19 is contagious and caused by the coronavirus, also known as
            SARS-CoV-2. The virus can spread through droplets when an infected person
            coughs, sneezes, or talks. Close contact with an infected person or touching
            contaminated surfaces can also transmit the virus. The best way to protect
            yourself is to avoid being exposed to this virus.
          heading: Get fast, convenient care for COVID-19. No appointment needed.
          label: cp_12q_449a_covid19coronavirus
          name: COVID-19
          urlSlug: covid-19
          icon:
            altText: covid
            darkModeImageUrl: https://assets.zipnosis.com/PatientInterface/Conditions/covid-a.webp
            imageUrl: https://assets.zipnosis.com/PatientInterface/Conditions/covid-a.webp
        fulfillmentOptions:
          retail:
            drugNames:
              - Antivirals
              - Antihistamines
              - Decongestants
              - Nasal sprays
              - Inhalants
              - Over-the-counter medications
        treatmentOptions:
          - commonName: Antivirals
            urlSlug: antivirals
            drugType: GENERIC
            description: Antivirals
          - commonName: Antihistamines
            urlSlug: antihistamines
            drugType: GENERIC
            description: Antihistamines
          - commonName: Decongestants
            urlSlug: decongestants
            drugType: GENERIC
            description: Decongestants
          - commonName: Nasal sprays
            urlSlug: nasal-sprays
            drugType: GENERIC
            description: Nasal sprays
          - commonName: Inhalants
            urlSlug: inhalants
            drugType: GENERIC
            description: Inhalants
          - commonName: Over-the-counter medications
            urlSlug: over-the-counter-medications
            drugType: GENERIC
            description: Over-the-counter medications
    nominal:
      value:
        server: healthy
        redis: ready
        db: connected
    failedDB:
      value:
        server: unhealthy
        redis: ready
        db: error
    redisWait:
      value:
        server: unhealthy
        redis: wait
        db: connected
    redisReconnecting:
      value:
        server: unhealthy
        redis: reconnecting
        db: connected
    redisConnecting:
      value:
        server: unhealthy
        redis: connecting
        db: connected
    redisConnect:
      value:
        server: unhealthy
        redis: connect
        db: connected
    redisClose:
      value:
        server: unhealthy
        redis: close
        db: connected
    redisEnd:
      value:
        server: unhealthy
        redis: end
        db: connected
  securitySchemes:
    bearerAuth:
      description: |
        Generate your JWT when you log in.
      type: http
      scheme: bearer
      bearerFormat: JWT
  responses:
    Error401Response:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error401Unauthorized'
    Error403Response:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error403Forbidden'
    Error404Response:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error404NotFound'
    Error400Response:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error400BadRequest'
  headers:
    session-token:
      description: |
        Returns a new session-token for any call that does not include  an Authorization Bearer-token
      schema:
        type: string
        format: byte
      examples:
        BasicExample:
          value: ZTU0YTNkOTYtNTE1Ni00YTE0LWFiZDQtYzI2ZjdlYmVmYmQ5
